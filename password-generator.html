<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator | SG Multi Tools</title>
    <meta name="description" content="Generate strong, secure passwords with custom options.">
    <link rel="icon" href="favicon/favicon.ico">
    
    <!-- Global Stylesheet (contains theme variables) -->
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome & Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Page‑specific styles (only if you need to override something) -->
    <style>
        /* Additional fine‑tuning for password generator */
        .password-generator {
            max-width: 700px;
            margin: 2rem auto;
        }

        .password-display {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--bg-main);
            border: 1px solid #2a313c;
            border-radius: 16px;
            padding: 0.25rem 0.25rem 0.25rem 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .password-display:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(66, 248, 245, 0.2);
        }
        #passwordOutput {
            flex: 1;
            border: none;
            background: transparent;
            font-family: 'Courier New', monospace;
            font-size: 1.25rem;
            padding: 0.75rem 0;
            color: var(--text-primary);
            outline: none;
        }

        .copy-btn {
            background: var(--bg-button);
            border: 1px solid #3a4352;
            border-radius: 12px;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            transition: all 0.2s;
        }
        .copy-btn:hover {
            background: var(--bg-button-hover);
            color: var(--text-on-accent);
            border-color: var(--accent);
        }
        .copy-btn.copied {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .strength-bar-bg {
            background: #2a313c;
        }
        .strength-bar-fill {
            transition: width 0.3s, background-color 0.3s;
        }

        .options-panel {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid rgba(66, 248, 245, 0.1);
        }

        .checkbox-group label {
            background: var(--bg-main);
            border: 1px solid #2a313c;
            color: var(--text-secondary);
        }
        .checkbox-group label:hover {
            background: #2a313c;
            border-color: var(--accent);
        }

        .mode-btn {
            background: var(--bg-main);
            border: 1px solid #2a313c;
            color: var(--text-secondary);
        }
        .mode-btn.active {
            background: var(--accent);
            color: var(--text-on-accent);
            border-color: var(--accent);
        }

        select {
            background: var(--bg-main);
            border: 1px solid #2a313c;
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 8px;
        }

        .generate-btn {
            background: var(--accent);
            color: var(--text-on-accent);
            border: none;
            width: 100%;
            padding: 1rem;
            border-radius: 16px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.2s;
        }
        .generate-btn:hover {
            background: var(--accent-shade);
            box-shadow: 0 0 16px var(--glow-shadow);
        }
    </style>
</head>
<body>
    <!-- Your site navbar (use the theme) -->
    <nav style="background: var(--bg-card); padding: 1rem 2rem; border-bottom: 1px solid var(--accent);">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <i class="fas fa-lock" style="color: var(--accent); font-size: 1.5rem;"></i>
            <span style="font-weight: 600; color: var(--text-primary);">SG Multi Tools</span>
        </div>
    </nav>

    <main class="password-generator card">
        <h1 style="margin-bottom: 1.5rem; font-size: 1.75rem; display: flex; align-items: center; gap: 0.75rem; color: var(--text-primary);">
            <i class="fas fa-shield-alt" style="color: var(--accent);"></i> 
            Password Generator
        </h1>
        
        <!-- Password Display + Copy -->
        <div class="password-display">
            <input type="text" id="passwordOutput" readonly aria-label="Generated password" value="P@ssw0rd!">
            <button id="copyBtn" class="copy-btn" aria-label="Copy password">
                <i class="fas fa-copy"></i>
                <span>Copy</span>
            </button>
        </div>
        
        <!-- Strength Meter -->
        <div class="strength-meter" style="margin: 1.5rem 0 0.5rem;">
            <div style="display: flex; justify-content: space-between; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">
                <span>Password strength</span>
                <span id="strengthScore" style="color: var(--accent); font-weight: 600;">Fair</span>
            </div>
            <div class="strength-bar-bg" style="height: 8px; background: #2a313c; border-radius: 100px; overflow: hidden;">
                <div id="strengthBar" class="strength-bar-fill" style="width: 60%; background: #f59e0b; height: 100%;"></div>
            </div>
        </div>
        
        <!-- Options Panel -->
        <div class="options-panel">
            <!-- Length Slider -->
            <div style="margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="lengthSlider" style="color: var(--text-secondary);">Password length</label>
                    <span id="lengthDisplay" style="background: var(--accent); color: var(--text-on-accent); padding: 0.25rem 0.75rem; border-radius: 100px; font-weight: 600; font-size: 0.875rem;">12</span>
                </div>
                <input type="range" id="lengthSlider" min="4" max="64" value="12" step="1" style="width: 100%; margin-top: 0.75rem; accent-color: var(--accent);">
            </div>
            
            <!-- Password Mode -->
            <div style="margin-bottom: 1.5rem;">
                <div style="color: var(--text-secondary); margin-bottom: 0.75rem; font-weight: 500;">Password type</div>
                <div class="mode-selector" style="display: flex; gap: 1rem;">
                    <button id="modeRandom" class="mode-btn active" style="flex: 1; padding: 0.75rem;"><i class="fas fa-random"></i> Random</button>
                    <button id="modeMemorable" class="mode-btn" style="flex: 1; padding: 0.75rem;"><i class="fas fa-font"></i> Memorable</button>
                </div>
            </div>
            
            <!-- Random Mode Options -->
            <div id="randomOptions">
                <div style="margin-bottom: 1.5rem;">
                    <div style="color: var(--text-secondary); margin-bottom: 0.75rem; font-weight: 500;">Include:</div>
                    <div class="checkbox-group" style="display: flex; flex-wrap: wrap; gap: 0.75rem;">
                        <label style="padding: 0.5rem 1rem; border-radius: 100px;"><input type="checkbox" id="useUppercase" checked> A–Z</label>
                        <label style="padding: 0.5rem 1rem; border-radius: 100px;"><input type="checkbox" id="useLowercase" checked> a–z</label>
                        <label style="padding: 0.5rem 1rem; border-radius: 100px;"><input type="checkbox" id="useNumbers" checked> 0–9</label>
                        <label style="padding: 0.5rem 1rem; border-radius: 100px;"><input type="checkbox" id="useSymbols"> !@#$%^&*</label>
                    </div>
                </div>
                <div style="display: flex; align-items: center;">
                    <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                        <input type="checkbox" id="excludeAmbiguous"> 
                        Exclude ambiguous characters (Il1O0)
                    </label>
                </div>
            </div>
            
            <!-- Memorable Mode Options (hidden by default) -->
            <div id="memorableOptions" style="display: none;">
                <div style="margin-bottom: 1.5rem;">
                    <div style="color: var(--text-secondary); margin-bottom: 0.5rem;">Word separator</div>
                    <select id="separatorSelect">
                        <option value="-">Hyphen (-)</option>
                        <option value=".">Dot (.)</option>
                        <option value="_">Underscore (_)</option>
                        <option value=" ">Space</option>
                        <option value="">None</option>
                    </select>
                </div>
                <div style="display: flex; align-items: center;">
                    <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                        <input type="checkbox" id="addNumber" checked> 
                        Add a number at the end
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Generate Button -->
        <button id="generateBtn" class="generate-btn">
            <i class="fas fa-shield-alt"></i> Generate New Password
        </button>
    </main>

    <script>
        // === Password Generator Core (unchanged from previous working version) ===
        (function() {
            "use strict";
            
            const CHAR_SETS = {
                uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                lowercase: 'abcdefghijklmnopqrstuvwxyz',
                numbers: '0123456789',
                symbols: '!@#$%^&*()_+~`|}{[]:;?><,./-='
            };
            const AMBIGUOUS = 'Il1O0';
            const WORD_LIST = [
                'apple', 'mountain', 'ocean', 'forest', 'thunder', 'crystal', 
                'eagle', 'river', 'flame', 'stone', 'wind', 'cloud', 'sunset',
                'tiger', 'python', 'quantum', 'silver', 'golden', 'iron', 'swift'
            ];
            
            // DOM elements
            const passwordOutput = document.getElementById('passwordOutput');
            const copyBtn = document.getElementById('copyBtn');
            const generateBtn = document.getElementById('generateBtn');
            const lengthSlider = document.getElementById('lengthSlider');
            const lengthDisplay = document.getElementById('lengthDisplay');
            const useUppercase = document.getElementById('useUppercase');
            const useLowercase = document.getElementById('useLowercase');
            const useNumbers = document.getElementById('useNumbers');
            const useSymbols = document.getElementById('useSymbols');
            const excludeAmbiguous = document.getElementById('excludeAmbiguous');
            const modeRandom = document.getElementById('modeRandom');
            const modeMemorable = document.getElementById('modeMemorable');
            const randomOptions = document.getElementById('randomOptions');
            const memorableOptions = document.getElementById('memorableOptions');
            const separatorSelect = document.getElementById('separatorSelect');
            const addNumber = document.getElementById('addNumber');
            const strengthBar = document.getElementById('strengthBar');
            const strengthScore = document.getElementById('strengthScore');
            
            let currentMode = 'random';
            
            // Event listeners
            lengthSlider.addEventListener('input', function() {
                lengthDisplay.textContent = lengthSlider.value;
                if (currentMode === 'random') generatePassword();
                else generateMemorablePassword();
            });
            
            modeRandom.addEventListener('click', function() { setActiveMode('random'); generatePassword(); });
            modeMemorable.addEventListener('click', function() { setActiveMode('memorable'); generateMemorablePassword(); });
            
            function setActiveMode(mode) {
                currentMode = mode;
                if (mode === 'random') {
                    modeRandom.classList.add('active');
                    modeMemorable.classList.remove('active');
                    randomOptions.style.display = 'block';
                    memorableOptions.style.display = 'none';
                } else {
                    modeMemorable.classList.add('active');
                    modeRandom.classList.remove('active');
                    randomOptions.style.display = 'none';
                    memorableOptions.style.display = 'block';
                }
            }
            
            [useUppercase, useLowercase, useNumbers, useSymbols, excludeAmbiguous].forEach(el => {
                if (el) el.addEventListener('change', generatePassword);
            });
            [separatorSelect, addNumber].forEach(el => {
                if (el) el.addEventListener('change', generateMemorablePassword);
            });
            
            generateBtn.addEventListener('click', function() {
                if (currentMode === 'random') generatePassword();
                else generateMemorablePassword();
            });
            
            copyBtn.addEventListener('click', async function() {
                if (!passwordOutput.value) return;
                try {
                    await navigator.clipboard.writeText(passwordOutput.value);
                    copyBtn.classList.add('copied');
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.classList.remove('copied');
                        copyBtn.innerHTML = originalHTML;
                    }, 2000);
                } catch (err) {
                    alert('Failed to copy. Please copy manually.');
                }
            });
            
            // Random password generation
            function generatePassword() {
                let pool = '';
                if (useUppercase.checked) pool += CHAR_SETS.uppercase;
                if (useLowercase.checked) pool += CHAR_SETS.lowercase;
                if (useNumbers.checked) pool += CHAR_SETS.numbers;
                if (useSymbols.checked) pool += CHAR_SETS.symbols;
                
                if (excludeAmbiguous.checked) {
                    pool = pool.split('').filter(ch => !AMBIGUOUS.includes(ch)).join('');
                }
                
                if (pool.length === 0) {
                    pool = CHAR_SETS.lowercase + CHAR_SETS.numbers;
                }
                
                const length = parseInt(lengthSlider.value, 10);
                let password = '';
                const randomValues = new Uint32Array(length);
                window.crypto.getRandomValues(randomValues);
                
                for (let i = 0; i < length; i++) {
                    password += pool[randomValues[i] % pool.length];
                }
                
                passwordOutput.value = password;
                updateStrengthMeter(password);
            }
            
            // Memorable password generation
            function generateMemorablePassword() {
                const numWords = Math.min(4, Math.floor(parseInt(lengthSlider.value, 10) / 5) + 2);
                const separator = separatorSelect.value;
                let words = [];
                
                for (let i = 0; i < numWords; i++) {
                    const rand = new Uint32Array(1);
                    window.crypto.getRandomValues(rand);
                    words.push(WORD_LIST[rand[0] % WORD_LIST.length]);
                }
                
                let password = words.join(separator);
                
                if (addNumber.checked) {
                    const randNum = new Uint32Array(1);
                    window.crypto.getRandomValues(randNum);
                    password += (randNum[0] % 100);
                }
                
                const maxLen = parseInt(lengthSlider.value, 10);
                if (password.length > maxLen) {
                    password = password.slice(0, maxLen);
                }
                
                passwordOutput.value = password;
                updateStrengthMeter(password);
            }
            
            // Strength meter
            function updateStrengthMeter(password) {
                const len = password.length;
                let score = 0;
                if (len >= 8) score += 1;
                if (len >= 12) score += 1;
                if (len >= 16) score += 1;
                if (/[A-Z]/.test(password)) score += 1;
                if (/[a-z]/.test(password)) score += 1;
                if (/[0-9]/.test(password)) score += 1;
                if (/[^A-Za-z0-9]/.test(password)) score += 1;
                
                let percent, label, color;
                if (score <= 2) { percent = 25; label = 'Very Weak'; color = '#ef4444'; }
                else if (score <= 4) { percent = 45; label = 'Weak'; color = '#f59e0b'; }
                else if (score <= 6) { percent = 70; label = 'Fair'; color = '#3b82f6'; }
                else { percent = 100; label = 'Strong'; color = '#10b981'; }
                
                strengthBar.style.width = percent + '%';
                strengthBar.style.backgroundColor = color;
                strengthScore.textContent = label;
            }
            
            // Initial generation
            generatePassword();
        })();
    </script>
</body>
</html>
