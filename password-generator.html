<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator | SG Multi Tools</title>
    <meta name="description" content="Generate strong, secure passwords with custom options.">
    <link rel="icon" href="favicon/favicon.ico">
    <!-- SITE GLOBAL CSS – MAKE SURE THIS PATH IS CORRECT -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Page‑specific styles – only what's not in global CSS */
        .tool-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: var(--button-bg-alt);
            border-radius: 24px;
            border: 1px solid var(--dark-border);
        }
        .password-output {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .password-output input {
            flex: 1;
            padding: 1rem;
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: monospace;
            font-size: 1.1rem;
        }
        .password-btn {
            padding: 1rem 1.5rem;
            background: var(--primary-accent);
            border: none;
            border-radius: 12px;
            color: var(--main-bg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        .password-btn:hover {
            background: var(--accent-shade);
            transform: scale(1.05);
        }
        .strength-meter {
            margin: 1.5rem 0;
            padding: 1rem;
            background: var(--button-bg);
            border-radius: 12px;
        }
        .strength-bar-container {
            height: 8px;
            background: var(--dark-border);
            border-radius: 4px;
            margin: 0.5rem 0;
        }
        .strength-bar {
            height: 100%;
            width: 0;
            border-radius: 4px;
            transition: width 0.3s, background 0.3s;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .option-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
        }
        .history-section {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--dark-border);
        }
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 1rem;
        }
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            background: var(--button-bg);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }
        @media (max-width: 600px) {
            .password-output {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER (matching homepage) -->
    <header class="site-header">
        <div class="header-inner">
            <div class="logo">
                <span class="logo-circle">SG</span>
                <span class="logo-text">SG Multi Tools</span>
            </div>
            <nav class="nav">
                <a href="index.html">Home</a>
                <a href="tools.html">Tools</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="tool-container">
                <h1 style="color: var(--primary-accent); margin-bottom: 1.5rem;">
                    <i class="fas fa-lock"></i> Password Generator
                </h1>

                <!-- Password display + copy/regenerate -->
                <div class="password-output">
                    <input type="text" id="passwordOutput" readonly>
                    <button id="copyBtn" class="password-btn">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button id="regenerateBtn" class="password-btn">
                        <i class="fas fa-sync-alt"></i> Regenerate
                    </button>
                </div>

                <!-- Strength meter & entropy -->
                <div class="strength-meter">
                    <div style="display: flex; justify-content: space-between;">
                        <span><i id="strengthIcon" class="fas fa-shield-alt"></i> <span id="strengthLabel">Very Weak</span></span>
                        <span>Entropy: <span id="entropyValue">0.0</span> bits</span>
                    </div>
                    <div class="strength-bar-container">
                        <div class="strength-bar" id="strengthBar" style="width: 0%;"></div>
                    </div>
                    <div id="entropyDescription" style="color: var(--text-muted); margin-top: 0.5rem;"></div>
                </div>

                <!-- Options grid -->
                <div class="options-grid">
                    <div class="option-item">
                        <label>Length:</label>
                        <input type="range" id="passwordLength" min="4" max="32" value="12">
                        <span id="lengthValue">12</span>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="useUppercase" checked>
                        <label>Uppercase (A-Z)</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="useLowercase" checked>
                        <label>Lowercase (a-z)</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="useNumbers" checked>
                        <label>Numbers (0-9)</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="useSymbols">
                        <label>Symbols (!@#$...)</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="excludeAmbiguous">
                        <label>Exclude ambiguous (il1|0O)</label>
                    </div>
                    <div class="option-item">
                        <label>Exclude:</label>
                        <input type="text" id="excludeChars" placeholder="e.g. @#$" style="width: 100px; background: var(--button-bg); border: 1px solid var(--dark-border); color: var(--text-primary); padding: 0.3rem; border-radius: 6px;">
                    </div>
                </div>

                <!-- Password history -->
                <div class="history-section">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h3 style="color: var(--text-primary);">Recent Passwords</h3>
                        <button id="clearHistoryBtn" class="password-btn" style="background: var(--danger-color);">Clear</button>
                    </div>
                    <div id="historyList" class="history-list"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER (single‑line, white links, email) -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-links-horizontal">
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="disclaimer.html">Disclaimer</a>
                <a href="terms-and-conditions.html">Terms & Conditions</a>
                <a href="sitemap.xml">Sitemap</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </div>
            <div class="footer-email">contact@sgtools.in</div>
        </div>
    </footer>

    <script>
        // ---------- Character Sets ----------
        const CHAR_SETS = {
            uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            lowercase: 'abcdefghijklmnopqrstuvwxyz',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
        };
        const AMBIGUOUS_CHARS = 'il1|0O';

        // DOM elements
        const passwordOutput = document.getElementById('passwordOutput');
        const passwordLength = document.getElementById('passwordLength');
        const lengthValue = document.getElementById('lengthValue');
        const useUppercase = document.getElementById('useUppercase');
        const useLowercase = document.getElementById('useLowercase');
        const useNumbers = document.getElementById('useNumbers');
        const useSymbols = document.getElementById('useSymbols');
        const excludeAmbiguous = document.getElementById('excludeAmbiguous');
        const excludeChars = document.getElementById('excludeChars');
        const strengthBar = document.getElementById('strengthBar');
        const strengthLabel = document.getElementById('strengthLabel');
        const strengthIcon = document.getElementById('strengthIcon');
        const entropyValue = document.getElementById('entropyValue');
        const entropyDescription = document.getElementById('entropyDescription');
        const copyBtn = document.getElementById('copyBtn');
        const regenerateBtn = document.getElementById('regenerateBtn');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const historyList = document.getElementById('historyList');

        let passwordHistory = JSON.parse(localStorage.getItem('passwordHistory') || '[]');

        // Generate password
        function generatePassword() {
            let chars = '';
            if (useUppercase.checked) chars += CHAR_SETS.uppercase;
            if (useLowercase.checked) chars += CHAR_SETS.lowercase;
            if (useNumbers.checked) chars += CHAR_SETS.numbers;
            if (useSymbols.checked) chars += CHAR_SETS.symbols;

            let excludeSet = '';
            if (excludeAmbiguous.checked) excludeSet += AMBIGUOUS_CHARS;
            if (excludeChars.value.trim()) excludeSet += excludeChars.value.trim();

            if (excludeSet) {
                chars = chars.split('').filter(c => !excludeSet.includes(c)).join('');
            }

            if (chars.length === 0) chars = CHAR_SETS.lowercase;

            const length = parseInt(passwordLength.value, 10);
            let password = '';
            for (let i = 0; i < length; i++) {
                password += chars[Math.floor(Math.random() * chars.length)];
            }

            passwordOutput.value = password;
            updateStrength(password, chars.length);
            calculateEntropy(password, chars.length);
            addToHistory(password);
        }

        // Strength meter
        function updateStrength(password, poolSize) {
            let score = 0;
            if (password.length >= 8) score += 1;
            if (password.length >= 12) score += 1;
            if (password.length >= 16) score += 1;
            if (password.length >= 20) score += 1;
            if (/[A-Z]/.test(password)) score += 1;
            if (/[a-z]/.test(password)) score += 1;
            if (/[0-9]/.test(password)) score += 1;
            if (/[^A-Za-z0-9]/.test(password)) score += 1;
            if (/([A-Z].*[A-Z])/.test(password)) score += 0.5;
            if (/([a-z].*[a-z])/.test(password)) score += 0.5;
            if (/([0-9].*[0-9])/.test(password)) score += 0.5;
            if (/([^A-Za-z0-9].*[^A-Za-z0-9])/.test(password)) score += 0.5;
            if (/(.)\1{2,}/.test(password)) score -= 1;

            const normalized = Math.min(100, Math.max(0, (score / 8.5) * 100));
            strengthBar.style.width = normalized + '%';

            if (normalized < 25) {
                strengthLabel.textContent = 'Very Weak';
                strengthBar.style.backgroundColor = '#ff4d4d';
                strengthIcon.className = 'fas fa-shield-alt';
                strengthIcon.style.color = '#ff4d4d';
            } else if (normalized < 45) {
                strengthLabel.textContent = 'Weak';
                strengthBar.style.backgroundColor = '#ff8c4d';
                strengthIcon.className = 'fas fa-shield';
                strengthIcon.style.color = '#ff8c4d';
            } else if (normalized < 65) {
                strengthLabel.textContent = 'Fair';
                strengthBar.style.backgroundColor = '#ffd24d';
                strengthIcon.className = 'fas fa-shield';
                strengthIcon.style.color = '#ffd24d';
            } else if (normalized < 85) {
                strengthLabel.textContent = 'Good';
                strengthBar.style.backgroundColor = '#4caf92';
                strengthIcon.className = 'fas fa-shield';
                strengthIcon.style.color = '#4caf92';
            } else {
                strengthLabel.textContent = 'Strong';
                strengthBar.style.backgroundColor = '#42f8f5';
                strengthIcon.className = 'fas fa-shield';
                strengthIcon.style.color = '#42f8f5';
            }
        }

        // Entropy calculation
        function calculateEntropy(password, poolSize) {
            const entropy = password.length * Math.log2(poolSize || 1);
            entropyValue.textContent = entropy.toFixed(1);
            if (entropy < 30) entropyDescription.textContent = 'Very weak – Can be cracked instantly';
            else if (entropy < 50) entropyDescription.textContent = 'Weak – May take hours to crack';
            else if (entropy < 70) entropyDescription.textContent = 'Fair – Could take months to crack';
            else if (entropy < 90) entropyDescription.textContent = 'Good – Would take centuries to crack';
            else entropyDescription.textContent = 'Excellent – Virtually uncrackable';
        }

        // Copy password
        function copyPassword() {
            if (!passwordOutput.value) return alert('No password to copy');
            navigator.clipboard.writeText(passwordOutput.value).then(() => {
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                copyBtn.style.background = '#42f8f5';
                setTimeout(() => {
                    copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
                    copyBtn.style.background = '';
                }, 2000);
            }).catch(() => alert('Failed to copy'));
        }

        // History management
        function addToHistory(pwd) {
            passwordHistory.unshift(pwd);
            if (passwordHistory.length > 10) passwordHistory.pop();
            localStorage.setItem('passwordHistory', JSON.stringify(passwordHistory));
            renderHistory();
        }

        function renderHistory() {
            if (!historyList) return;
            historyList.innerHTML = '';
            passwordHistory.forEach((pwd, i) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <span style="font-family: monospace;">${pwd}</span>
                    <button onclick="copyHistoryPassword('${pwd}')" style="background: none; border: none; color: var(--primary-accent); cursor: pointer;">
                        <i class="fas fa-copy"></i>
                    </button>
                `;
                historyList.appendChild(div);
            });
        }

        function copyHistoryPassword(pwd) {
            navigator.clipboard.writeText(pwd).then(() => alert('Password copied!'));
        }

        function clearHistory() {
            passwordHistory = [];
            localStorage.removeItem('passwordHistory');
            renderHistory();
        }

        // Event listeners
        function initEvents() {
            passwordLength.addEventListener('input', function() {
                lengthValue.textContent = this.value;
                generatePassword();
            });
            [useUppercase, useLowercase, useNumbers, useSymbols, excludeAmbiguous].forEach(cb => {
                cb.addEventListener('change', generatePassword);
            });
            let excludeTimeout;
            excludeChars.addEventListener('input', function() {
                clearTimeout(excludeTimeout);
                excludeTimeout = setTimeout(generatePassword, 300);
            });
            regenerateBtn.addEventListener('click', generatePassword);
            copyBtn.addEventListener('click', copyPassword);
            clearHistoryBtn.addEventListener('click', clearHistory);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initEvents();
            lengthValue.textContent = passwordLength.value;
            renderHistory();
            generatePassword();
        });

        // Expose for inline onclick
        window.copyHistoryPassword = copyHistoryPassword;
    </script>
</body>
</html>
