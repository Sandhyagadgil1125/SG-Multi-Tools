<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech - SG Tools</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .generator-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        /* Text Input Card */
        .text-input-card {
            background: var(--button-bg-alt);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid var(--dark-border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .text-input-card:hover {
            border-color: var(--primary-accent);
            box-shadow: 0 15px 35px rgba(66, 248, 245, 0.15);
        }
        
        .text-input-card::before {
            content: '\f028';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            right: 30px;
            top: 30px;
            font-size: 3rem;
            color: rgba(66, 248, 245, 0.08);
        }
        
        .text-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .text-label i {
            color: var(--primary-accent);
        }
        
        /* Text Input Area */
        .text-input-container {
            margin-bottom: 25px;
        }
        
        .text-input-area {
            width: 100%;
            min-height: 200px;
            padding: 25px;
            background: var(--main-bg);
            border: 2px solid var(--dark-border);
            border-radius: 20px;
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.8;
            resize: vertical;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
            margin-bottom: 15px;
        }
        
        .text-input-area:focus {
            outline: none;
            border-color: var(--primary-accent);
            box-shadow: 0 0 0 3px rgba(66, 248, 245, 0.2);
        }
        
        .text-input-area::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }
        
        .text-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            padding: 5px 10px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stats-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .stats-item i {
            color: var(--primary-accent);
        }
        
        .text-actions {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .text-action-btn {
            flex: 1;
            min-width: 140px;
            background: var(--button-bg);
            border: 1px solid var(--dark-border);
            border-radius: 14px;
            padding: 16px 25px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .text-action-btn:hover {
            border-color: var(--primary-accent);
            color: var(--primary-accent);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(66, 248, 245, 0.15);
        }
        
        .text-action-btn i {
            font-size: 1.2rem;
        }
        
        /* Audio Player Card */
        .audio-player-card {
            background: var(--button-bg-alt);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid var(--dark-border);
        }
        
        .audio-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
        }
        
        .audio-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .audio-icon {
            width: 50px;
            height: 50px;
            background: rgba(66, 248, 245, 0.1);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-accent);
            font-size: 1.5rem;
        }
        
        .audio-title h3 {
            color: var(--text-primary);
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .voice-badge {
            background: rgba(66, 248, 245, 0.15);
            color: var(--primary-accent);
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(66, 248, 245, 0.3);
        }
        
        .voice-badge i {
            font-size: 1rem;
        }
        
        /* Waveform Visualization */
        .waveform-container {
            background: var(--main-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid var(--dark-border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .waveform-container.playing {
            border-color: var(--primary-accent);
            box-shadow: 0 0 30px rgba(66, 248, 245, 0.15);
        }
        
        .waveform-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            height: 80px;
            margin-bottom: 20px;
        }
        
        .wave-bar {
            width: 10px;
            height: 30px;
            background: rgba(66, 248, 245, 0.3);
            border-radius: 5px;
            transition: height 0.2s ease, background 0.2s ease;
            animation: waveform 1.5s infinite ease-in-out;
        }
        
        .wave-bar:nth-child(1) { animation-delay: 0.1s; }
        .wave-bar:nth-child(2) { animation-delay: 0.2s; }
        .wave-bar:nth-child(3) { animation-delay: 0.3s; }
        .wave-bar:nth-child(4) { animation-delay: 0.4s; }
        .wave-bar:nth-child(5) { animation-delay: 0.5s; }
        .wave-bar:nth-child(6) { animation-delay: 0.6s; }
        .wave-bar:nth-child(7) { animation-delay: 0.7s; }
        .wave-bar:nth-child(8) { animation-delay: 0.8s; }
        .wave-bar:nth-child(9) { animation-delay: 0.9s; }
        .wave-bar:nth-child(10) { animation-delay: 1.0s; }
        
        @keyframes waveform {
            0%, 100% { height: 30px; background: rgba(66, 248, 245, 0.3); }
            50% { height: 70px; background: rgba(66, 248, 245, 0.9); }
        }
        
        .playing .wave-bar {
            animation: waveform 1.5s infinite ease-in-out;
        }
        
        .wave-status {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 10px;
        }
        
        .status-indicator {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--text-muted);
            transition: var(--transition);
        }
        
        .status-indicator.playing {
            background: var(--primary-accent);
            box-shadow: 0 0 20px var(--primary-accent);
            animation: pulse 1.5s infinite;
        }
        
        .status-indicator.paused {
            background: #ffd24d;
            box-shadow: 0 0 20px rgba(255, 210, 77, 0.5);
        }
        
        .status-indicator.stopped {
            background: var(--text-muted);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(66, 248, 245, 0.4); }
            70% { box-shadow: 0 0 0 20px rgba(66, 248, 245, 0); }
            100% { box-shadow: 0 0 0 0 rgba(66, 248, 245, 0); }
        }
        
        /* Playback Controls */
        .playback-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .playback-btn {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: var(--main-bg);
            border: 2px solid var(--dark-border);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .playback-btn:hover {
            border-color: var(--primary-accent);
            color: var(--primary-accent);
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(66, 248, 245, 0.25);
        }
        
        .playback-btn.play {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-accent), var(--accent-shade));
            color: var(--main-bg);
            border: none;
            font-size: 2.2rem;
        }
        
        .playback-btn.play:hover {
            transform: scale(1.15);
            box-shadow: 0 0 35px var(--glow-shadow);
        }
        
        .playback-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
            border-color: var(--dark-border) !important;
            color: var(--text-muted) !important;
            box-shadow: none !important;
        }
        
        /* Progress Bar */
        .progress-container {
            width: 100%;
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--main-bg);
            border-radius: 4px;
            border: 1px solid var(--dark-border);
            cursor: pointer;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary-accent), var(--accent-shade));
            border-radius: 4px;
            transition: width 0.1s ease;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            right: -5px;
            top: -4px;
            width: 14px;
            height: 14px;
            background: var(--primary-accent);
            border-radius: 50%;
            border: 2px solid var(--main-bg);
            box-shadow: 0 0 15px var(--glow-shadow);
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .progress-bar:hover .progress-fill::after {
            opacity: 1;
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 8px;
        }
        
        .current-time, .total-time {
            font-family: 'Courier New', monospace;
            color: var(--primary-accent);
            font-weight: 600;
        }
        
        /* Voice Settings Card */
        .voice-settings-card {
            background: var(--button-bg-alt);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid var(--dark-border);
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .settings-group {
            background: var(--main-bg);
            border-radius: 18px;
            padding: 25px;
            border: 1px solid var(--dark-border);
        }
        
        .settings-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .settings-header i {
            color: var(--primary-accent);
        }
        
        /* Voice Selection */
        .voice-select {
            width: 100%;
            padding: 16px;
            background: var(--button-bg-alt);
            border: 2px solid var(--dark-border);
            border-radius: 14px;
            color: var(--text-primary);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }
        
        .voice-select:hover {
            border-color: var(--primary-accent);
        }
        
        .voice-select:focus {
            outline: none;
            border-color: var(--primary-accent);
            box-shadow: 0 0 0 3px rgba(66, 248, 245, 0.2);
        }
        
        .voice-select option {
            background: var(--main-bg);
            color: var(--text-primary);
        }
        
        .voice-info {
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--text-muted);
            font-size: 0.95rem;
            padding: 12px;
            background: rgba(66, 248, 245, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(66, 248, 245, 0.15);
        }
        
        .voice-info i {
            color: var(--primary-accent);
        }
        
        /* Slider Controls */
        .slider-control {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .slider-label {
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .slider-value {
            background: rgba(66, 248, 245, 0.15);
            color: var(--primary-accent);
            padding: 6px 18px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: var(--button-bg);
            border-radius: 4px;
            outline: none;
            border: 1px solid var(--dark-border);
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary-accent);
            cursor: pointer;
            border: 2px solid var(--main-bg);
            box-shadow: 0 0 15px var(--glow-shadow);
            transition: var(--transition);
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        /* Pitch Preview */
        .pitch-preview {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .pitch-preview span {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .pitch-preview i {
            color: var(--primary-accent);
        }
        
        /* History Card */
        .history-card {
            background: var(--button-bg-alt);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid var(--dark-border);
        }
        
        .history-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
        }
        
        .history-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .history-icon {
            width: 45px;
            height: 45px;
            background: rgba(66, 248, 245, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-accent);
            font-size: 1.3rem;
        }
        
        .history-title h4 {
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .clear-history-btn {
            background: transparent;
            border: 1px solid var(--dark-border);
            color: var(--text-secondary);
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .clear-history-btn:hover {
            border-color: var(--danger-color);
            color: var(--danger-color);
        }
        
        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }
        
        .history-grid::-webkit-scrollbar {
            width: 6px;
        }
        
        .history-grid::-webkit-scrollbar-track {
            background: var(--main-bg);
            border-radius: 10px;
        }
        
        .history-grid::-webkit-scrollbar-thumb {
            background: var(--primary-accent);
            border-radius: 10px;
        }
        
        .history-item {
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 18px;
            padding: 20px;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .history-item:hover {
            border-color: var(--primary-accent);
            transform: translateY(-5px);
            box-shadow: 0 15px 25px rgba(66, 248, 245, 0.1);
        }
        
        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .history-item-time {
            color: var(--text-muted);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .history-item-time i {
            color: var(--primary-accent);
        }
        
        .history-item-voice {
            background: rgba(66, 248, 245, 0.1);
            color: var(--primary-accent);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .history-item-content {
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.6;
            max-height: 100px;
            overflow-y: auto;
            padding-right: 10px;
            padding: 10px;
            background: rgba(66, 248, 245, 0.02);
            border-radius: 10px;
            border: 1px solid transparent;
        }
        
        .history-item-content:hover {
            border-color: rgba(66, 248, 245, 0.2);
        }
        
        .history-item-content::-webkit-scrollbar {
            width: 3px;
        }
        
        .history-item-content::-webkit-scrollbar-thumb {
            background: var(--primary-accent);
            border-radius: 3px;
        }
        
        .history-item-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 5px;
        }
        
        .history-item-btn {
            width: 40px;
            height: 40px;
            background: var(--button-bg);
            border: 1px solid var(--dark-border);
            border-radius: 10px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }
        
        .history-item-btn:hover {
            border-color: var(--primary-accent);
            color: var(--primary-accent);
            transform: scale(1.1);
        }
        
        .empty-history {
            grid-column: 1 / -1;
            text-align: center;
            padding: 50px;
            color: var(--text-muted);
        }
        
        .empty-history i {
            font-size: 3rem;
            color: rgba(66, 248, 245, 0.2);
            margin-bottom: 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            text-decoration: none;
            margin-top: 40px;
            padding: 14px 28px;
            background: var(--button-bg-alt);
            border-radius: 30px;
            border: 1px solid var(--dark-border);
            transition: var(--transition);
        }
        
        .back-link:hover {
            color: var(--primary-accent);
            border-color: var(--primary-accent);
            transform: translateX(-5px);
        }
        
        @media (max-width: 992px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .text-actions {
                flex-direction: column;
            }
            
            .text-action-btn {
                width: 100%;
            }
            
            .playback-controls {
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 768px) {
            .text-input-card,
            .audio-player-card,
            .voice-settings-card,
            .history-card {
                padding: 20px;
            }
            
            .audio-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .voice-badge {
                align-self: flex-start;
            }
            
            .playback-btn {
                width: 55px;
                height: 55px;
                font-size: 1.5rem;
            }
            
            .playback-btn.play {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }
            
            .history-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .waveform-visual {
                gap: 5px;
                height: 60px;
            }
            
            .wave-bar {
                width: 6px;
            }
            
            .wave-status {
                font-size: 1rem;
            }
            
            .stats-item {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">SG Tools</span>
                        <span class="logo-subtitle">Multi Utilities</span>
                    </div>
                </div>
                
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="tools.html"><i class="fas fa-th"></i> Tools</a></li>
                        <li><a href="#about"><i class="fas fa-info-circle"></i> About</a></li>
                        <li><a href="#contact"><i class="fas fa-envelope"></i> Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="calculator-container">
                <div class="calculator-header">
                    <div class="calculator-header-icon">
                        <i class="fas fa-volume-up"></i>
                    </div>
                    <h1 class="section-title">Text to Speech</h1>
                    <p class="section-subtitle">Convert written text into natural-sounding speech with customizable voices</p>
                </div>
                
                <div class="generator-container">
                    <!-- Text Input Card -->
                    <div class="text-input-card">
                        <div class="text-label">
                            <i class="fas fa-pencil-alt"></i> Text Input
                        </div>
                        
                        <div class="text-input-container">
                            <textarea id="textInput" class="text-input-area" placeholder="Type or paste your text here...">Welcome to SG Tools Text to Speech. This is a sample text to demonstrate the speech synthesis capabilities. You can change the voice, adjust the speed and pitch, and download the audio as an MP3 file.</textarea>
                            
                            <div class="text-stats">
                                <div class="stats-item">
                                    <i class="fas fa-characters"></i>
                                    Characters: <span id="charCount">145</span>
                                </div>
                                <div class="stats-item">
                                    <i class="fas fa-words"></i>
                                    Words: <span id="wordCount">24</span>
                                </div>
                                <div class="stats-item">
                                    <i class="fas fa-clock"></i>
                                    Est. Duration: <span id="estDuration">00:32</span>
                                </div>
                            </div>
                            
                            <div class="text-actions">
                                <button class="text-action-btn" onclick="clearText()">
                                    <i class="fas fa-trash-alt"></i> Clear
                                </button>
                                <button class="text-action-btn" onclick="loadSample()">
                                    <i class="fas fa-file-alt"></i> Sample Text
                                </button>
                                <button class="text-action-btn" onclick="downloadText()">
                                    <i class="fas fa-download"></i> Save as TXT
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Audio Player Card -->
                    <div class="audio-player-card">
                        <div class="audio-header">
                            <div class="audio-title">
                                <div class="audio-icon">
                                    <i class="fas fa-headphones"></i>
                                </div>
                                <h3>Audio Player</h3>
                            </div>
                            <div class="voice-badge">
                                <i class="fas fa-microchip"></i>
                                <span id="currentVoiceName">Microsoft David</span>
                            </div>
                        </div>
                        
                        <div class="waveform-container" id="waveformContainer">
                            <div class="waveform-visual">
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                                <div class="wave-bar"></div>
                            </div>
                            
                            <div class="wave-status">
                                <span class="status-indicator" id="statusIndicator"></span>
                                <span id="statusText">Ready to speak</span>
                            </div>
                        </div>
                        
                        <div class="playback-controls">
                            <button class="playback-btn" onclick="rewind()" title="Rewind 10 seconds" id="rewindBtn">
                                <i class="fas fa-undo-alt"></i>
                            </button>
                            <button class="playback-btn play" onclick="playPause()" id="playPauseBtn">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="playback-btn" onclick="stop()" title="Stop" id="stopBtn">
                                <i class="fas fa-stop"></i>
                            </button>
                            <button class="playback-btn" onclick="forward()" title="Forward 10 seconds" id="forwardBtn">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-bar" id="progressBar" onclick="seek(event)">
                                <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                            </div>
                            <div class="time-info">
                                <span><span class="current-time" id="currentTime">00:00</span> / <span class="total-time" id="totalTime">00:00</span></span>
                                <span>
                                    <button class="history-item-btn" onclick="downloadAudio()" title="Download MP3" style="width: auto; padding: 5px 15px;">
                                        <i class="fas fa-download"></i> Download Audio
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Voice Settings Card -->
                    <div class="voice-settings-card">
                        <div class="settings-grid">
                            <div class="settings-group">
                                <div class="settings-header">
                                    <i class="fas fa-robot"></i>
                                    <span>Voice Selection</span>
                                </div>
                                
                                <select id="voiceSelect" class="voice-select">
                                    <option value="">Loading voices...</option>
                                </select>
                                
                                <div class="voice-info">
                                    <i class="fas fa-info-circle"></i>
                                    <span id="voiceDetails">Choose a voice from the list above</span>
                                </div>
                            </div>
                            
                            <div class="settings-group">
                                <div class="settings-header">
                                    <i class="fas fa-sliders-h"></i>
                                    <span>Speech Settings</span>
                                </div>
                                
                                <div class="slider-control">
                                    <div class="slider-header">
                                        <span class="slider-label">
                                            <i class="fas fa-tachometer-alt"></i> Speed
                                        </span>
                                        <span class="slider-value" id="speedValue">1.0x</span>
                                    </div>
                                    <input type="range" id="speedSlider" class="slider" min="0.5" max="2.0" value="1.0" step="0.1">
                                    <div class="pitch-preview">
                                        <span><i class="fas fa-turtle"></i> 0.5x</span>
                                        <span><i class="fas fa-circle"></i> 1.0x</span>
                                        <span><i class="fas fa-rabbit"></i> 2.0x</span>
                                    </div>
                                </div>
                                
                                <div class="slider-control">
                                    <div class="slider-header">
                                        <span class="slider-label">
                                            <i class="fas fa-chart-line"></i> Pitch
                                        </span>
                                        <span class="slider-value" id="pitchValue">1.0</span>
                                    </div>
                                    <input type="range" id="pitchSlider" class="slider" min="0.5" max="2.0" value="1.0" step="0.1">
                                    <div class="pitch-preview">
                                        <span><i class="fas fa-arrow-down"></i> Low</span>
                                        <span><i class="fas fa-circle"></i> Normal</span>
                                        <span><i class="fas fa-arrow-up"></i> High</span>
                                    </div>
                                </div>
                                
                                <div class="slider-control">
                                    <div class="slider-header">
                                        <span class="slider-label">
                                            <i class="fas fa-volume-high"></i> Volume
                                        </span>
                                        <span class="slider-value" id="volumeValue">100%</span>
                                    </div>
                                    <input type="range" id="volumeSlider" class="slider" min="0" max="1.0" value="1.0" step="0.01">
                                    <div class="pitch-preview">
                                        <span><i class="fas fa-volume-off"></i> 0%</span>
                                        <span><i class="fas fa-volume-down"></i> 50%</span>
                                        <span><i class="fas fa-volume-up"></i> 100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- History Card -->
                    <div class="history-card">
                        <div class="history-header">
                            <div class="history-title">
                                <div class="history-icon">
                                    <i class="fas fa-history"></i>
                                </div>
                                <h4>Speech History</h4>
                            </div>
                            <button class="clear-history-btn" onclick="clearHistory()">
                                <i class="fas fa-trash-alt"></i> Clear History
                            </button>
                        </div>
                        
                        <div class="history-grid" id="historyGrid">
                            <div class="empty-history">
                                <i class="fas fa-volume-mute"></i>
                                <p>No speech history yet</p>
                                <p style="font-size: 0.9rem; margin-top: 10px;">Generate speech to see your history</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <a href="tools.html" class="back-link">
                    <i class="fas fa-arrow-left"></i> Back to All Tools
                </a>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-top">
                <div class="footer-logo">
                    <div class="logo-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="footer-logo-text">
                        <h3>SG Multi Tools</h3>
                        <p>Essential utilities for daily use</p>
                    </div>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Legal</h4>
                        <ul>
                            <li><a href="#privacy">Privacy Policy</a></li>
                            <li><a href="#disclaimer">Disclaimer</a></li>
                            <li><a href="#terms">Terms & Conditions</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Site Map</h4>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="tools.html">Tools</a></li>
                            <li><a href="#sitemap">Sitemap</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="#about">About Us</a></li>
                            <li><a href="#contact">Contact</a></li>
                            <li><a href="#faq">FAQ</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="contact-info">
                    <i class="fas fa-envelope"></i>
                    <span>contact@sgtools.in</span>
                </div>
                <div class="copyright">
                    <p>&copy; 2023 SG Multi Tools. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const textInput = document.getElementById('textInput');
        const voiceSelect = document.getElementById('voiceSelect');
        const speedSlider = document.getElementById('speedSlider');
        const pitchSlider = document.getElementById('pitchSlider');
        const volumeSlider = document.getElementById('volumeSlider');
        const speedValue = document.getElementById('speedValue');
        const pitchValue = document.getElementById('pitchValue');
        const volumeValue = document.getElementById('volumeValue');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const stopBtn = document.getElementById('stopBtn');
        const rewindBtn = document.getElementById('rewindBtn');
        const forwardBtn = document.getElementById('forwardBtn');
        const progressFill = document.getElementById('progressFill');
        const currentTime = document.getElementById('currentTime');
        const totalTime = document.getElementById('totalTime');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');
        const waveformContainer = document.getElementById('waveformContainer');
        const currentVoiceName = document.getElementById('currentVoiceName');
        const voiceDetails = document.getElementById('voiceDetails');
        const charCount = document.getElementById('charCount');
        const wordCount = document.getElementById('wordCount');
        const estDuration = document.getElementById('estDuration');
        const historyGrid = document.getElementById('historyGrid');
        
        // Speech Synthesis
        let synthesis = window.speechSynthesis;
        let utterance = null;
        let voices = [];
        let isPlaying = false;
        let isPaused = false;
        let currentVoice = null;
        let progressInterval = null;
        
        // History storage
        let speechHistory = [];
        
        // Load history from localStorage
        function loadHistory() {
            const stored = localStorage.getItem('sgTools_speechHistory');
            if (stored) {
                try {
                    speechHistory = JSON.parse(stored);
                } catch (e) {
                    speechHistory = [];
                }
            }
            renderHistory();
        }
        
        // Save history to localStorage
        function saveHistory() {
            localStorage.setItem('sgTools_speechHistory', JSON.stringify(speechHistory));
            renderHistory();
        }
        
        // Add to history
        function addToHistory(text, voice, rate, pitch) {
            if (!text.trim()) return;
            
            speechHistory.unshift({
                text: text.substring(0, 500), // Limit storage
                voice: voice || 'Default',
                voiceName: voice?.name || 'Default',
                rate: rate || 1.0,
                pitch: pitch || 1.0,
                timestamp: new Date().toISOString(),
                duration: totalTime.textContent
            });
            
            // Keep only last 15
            if (speechHistory.length > 15) {
                speechHistory = speechHistory.slice(0, 15);
            }
            
            saveHistory();
        }
        
        // Render history
        function renderHistory() {
            if (speechHistory.length === 0) {
                historyGrid.innerHTML = `
                    <div class="empty-history">
                        <i class="fas fa-volume-mute"></i>
                        <p>No speech history yet</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Generate speech to see your history</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            speechHistory.forEach((item, index) => {
                const date = new Date(item.timestamp);
                const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const previewText = item.text.substring(0, 80) + (item.text.length > 80 ? '...' : '');
                
                html += `
                    <div class="history-item">
                        <div class="history-item-header">
                            <span class="history-item-time">
                                <i class="fas fa-clock"></i> ${formattedDate}
                            </span>
                            <span class="history-item-voice">
                                <i class="fas fa-robot"></i> ${item.voiceName.substring(0, 15)}...
                            </span>
                        </div>
                        <div class="history-item-content">
                            ${previewText}
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: var(--text-muted); font-size: 0.75rem;">
                                <i class="fas fa-tachometer-alt"></i> ${item.rate}x | 
                                <i class="fas fa-chart-line"></i> ${item.pitch}
                            </span>
                            <div class="history-item-actions">
                                <button class="history-item-btn" onclick="loadFromHistory(${index})" title="Load Text">
                                    <i class="fas fa-file-alt"></i>
                                </button>
                                <button class="history-item-btn" onclick="speakFromHistory(${index})" title="Speak">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="history-item-btn" onclick="deleteHistoryItem(${index})" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            historyGrid.innerHTML = html;
        }
        
        // Load from history
        function loadFromHistory(index) {
            const item = speechHistory[index];
            if (item) {
                textInput.value = item.text;
                updateTextStats();
                
                // Try to find and set the voice
                if (item.voiceName) {
                    const voice = voices.find(v => v.name === item.voiceName);
                    if (voice) {
                        voiceSelect.value = voice.name;
                        currentVoice = voice;
                        currentVoiceName.textContent = voice.name.split(' ').slice(0, 2).join(' ');
                    }
                }
                
                speedSlider.value = item.rate || 1.0;
                speedValue.textContent = item.rate + 'x';
                pitchSlider.value = item.pitch || 1.0;
                pitchValue.textContent = item.pitch;
            }
        }
        
        // Speak from history
        function speakFromHistory(index) {
            const item = speechHistory[index];
            if (item) {
                textInput.value = item.text;
                updateTextStats();
                speak();
            }
        }
        
        // Delete history item
        function deleteHistoryItem(index) {
            speechHistory.splice(index, 1);
            saveHistory();
        }
        
        // Clear history
        function clearHistory() {
            if (confirm('Clear all speech history?')) {
                speechHistory = [];
                saveHistory();
            }
        }
        
        // Load voices
        function loadVoices() {
            voices = synthesis.getVoices();
            
            if (voices.length === 0) {
                // Try again after a delay
                setTimeout(loadVoices, 100);
                return;
            }
            
            // Clear select
            voiceSelect.innerHTML = '';
            
            // Group voices by language
            const groupedVoices = {};
            voices.forEach(voice => {
                const lang = voice.lang.split('-')[0];
                if (!groupedVoices[lang]) {
                    groupedVoices[lang] = [];
                }
                groupedVoices[lang].push(voice);
            });
            
            // Add voices to select
            Object.keys(groupedVoices).sort().forEach(lang => {
                const langGroup = document.createElement('optgroup');
                langGroup.label = new Intl.DisplayNames(['en'], { type: 'language' }).of(lang) || lang;
                
                groupedVoices[lang].forEach(voice => {
                    const option = document.createElement('option');
                    option.value = voice.name;
                    option.textContent = `${voice.name} (${voice.lang})${voice.default ? ' - Default' : ''}`;
                    langGroup.appendChild(option);
                });
                
                voiceSelect.appendChild(langGroup);
            });
            
            // Set default voice
            const defaultVoice = voices.find(voice => voice.default) || voices[0];
            if (defaultVoice) {
                voiceSelect.value = defaultVoice.name;
                currentVoice = defaultVoice;
                currentVoiceName.textContent = defaultVoice.name.split(' ').slice(0, 2).join(' ');
                voiceDetails.textContent = `${defaultVoice.lang} - ${defaultVoice.name}`;
            }
        }
        
        // Initialize voices
        if (synthesis) {
            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }
        
        // Voice change handler
        voiceSelect.addEventListener('change', function() {
            const selectedVoice = voices.find(voice => voice.name === this.value);
            if (selectedVoice) {
                currentVoice = selectedVoice;
                currentVoiceName.textContent = selectedVoice.name.split(' ').slice(0, 2).join(' ');
                voiceDetails.textContent = `${selectedVoice.lang} - ${selectedVoice.name}`;
            }
        });
        
        // Slider event listeners
        speedSlider.addEventListener('input', function() {
            speedValue.textContent = this.value + 'x';
            if (utterance) {
                utterance.rate = parseFloat(this.value);
            }
        });
        
        pitchSlider.addEventListener('input', function() {
            pitchValue.textContent = this.value;
            if (utterance) {
                utterance.pitch = parseFloat(this.value);
            }
        });
        
        volumeSlider.addEventListener('input', function() {
            volumeValue.textContent = Math.round(this.value * 100) + '%';
            if (utterance) {
                utterance.volume = parseFloat(this.value);
            }
        });
        
        // Text input stats
        function updateTextStats() {
            const text = textInput.value;
            charCount.textContent = text.length;
            
            const words = text.trim() ? text.trim().split(/\s+/).length : 0;
            wordCount.textContent = words;
            
            // Estimate duration (rough estimate: ~150 words per minute)
            const minutes = words / 150;
            const seconds = Math.round(minutes * 60);
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            estDuration.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        textInput.addEventListener('input', updateTextStats);
        
        // Speak function
        function speak() {
            if (!textInput.value.trim()) {
                alert('Please enter some text to speak');
                return;
            }
            
            // Cancel current speech
            if (synthesis.speaking) {
                synthesis.cancel();
            }
            
            // Create new utterance
            utterance = new SpeechSynthesisUtterance(textInput.value);
            
            // Set voice and settings
            if (currentVoice) {
                utterance.voice = currentVoice;
            }
            
            utterance.rate = parseFloat(speedSlider.value);
            utterance.pitch = parseFloat(pitchSlider.value);
            utterance.volume = parseFloat(volumeSlider.value);
            
            // Event handlers
            utterance.onstart = function() {
                isPlaying = true;
                isPaused = false;
                updatePlaybackState();
                startProgressTracking();
                waveformContainer.classList.add('playing');
            };
            
            utterance.onend = function() {
                isPlaying = false;
                isPaused = false;
                updatePlaybackState();
                stopProgressTracking();
                waveformContainer.classList.remove('playing');
                progressFill.style.width = '0%';
                currentTime.textContent = '00:00';
                
                // Add to history
                addToHistory(textInput.value, currentVoice, utterance.rate, utterance.pitch);
            };
            
            utterance.onpause = function() {
                isPlaying = false;
                isPaused = true;
                updatePlaybackState();
                waveformContainer.classList.remove('playing');
            };
            
            utterance.onresume = function() {
                isPlaying = true;
                isPaused = false;
                updatePlaybackState();
                waveformContainer.classList.add('playing');
            };
            
            utterance.onerror = function(event) {
                console.error('Speech synthesis error:', event);
                isPlaying = false;
                isPaused = false;
                updatePlaybackState();
                waveformContainer.classList.remove('playing');
                stopProgressTracking();
                statusText.textContent = 'Error occurred';
                statusIndicator.className = 'status-indicator stopped';
            };
            
            // Speak
            synthesis.speak(utterance);
        }
        
        // Play/Pause toggle
        function playPause() {
            if (!textInput.value.trim()) {
                alert('Please enter some text to speak');
                return;
            }
            
            if (isPlaying) {
                synthesis.pause();
            } else if (isPaused) {
                synthesis.resume();
            } else {
                speak();
            }
        }
        
        // Stop speech
        function stop() {
            if (synthesis.speaking) {
                synthesis.cancel();
                isPlaying = false;
                isPaused = false;
                updatePlaybackState();
                waveformContainer.classList.remove('playing');
                stopProgressTracking();
                progressFill.style.width = '0%';
                currentTime.textContent = '00:00';
            }
        }
        
        // Rewind 10 seconds
        function rewind() {
            // Note: Web Speech API doesn't support seeking
            // This is a visual placeholder
            statusText.textContent = 'Seeking not supported';
            setTimeout(() => {
                updatePlaybackState();
            }, 1000);
        }
        
        // Forward 10 seconds
        function forward() {
            // Note: Web Speech API doesn't support seeking
            // This is a visual placeholder
            statusText.textContent = 'Seeking not supported';
            setTimeout(() => {
                updatePlaybackState();
            }, 1000);
        }
        
        // Seek
        function seek(event) {
            // Note: Web Speech API doesn't support seeking
            // This is a visual placeholder
            const progressBar = document.getElementById('progressBar');
            const rect = progressBar.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const percentage = (x / rect.width) * 100;
            progressFill.style.width = percentage + '%';
        }
        
        // Update playback state UI
        function updatePlaybackState() {
            if (isPlaying) {
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                statusText.textContent = 'Speaking...';
                statusIndicator.className = 'status-indicator playing';
                stopBtn.disabled = false;
            } else if (isPaused) {
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                statusText.textContent = 'Paused';
                statusIndicator.className = 'status-indicator paused';
                stopBtn.disabled = false;
            } else {
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                statusText.textContent = 'Ready to speak';
                statusIndicator.className = 'status-indicator stopped';
                stopBtn.disabled = true;
            }
        }
        
        // Start progress tracking
        function startProgressTracking() {
            stopProgressTracking();
            progressInterval = setInterval(updateProgress, 100);
        }
        
        // Stop progress tracking
        function stopProgressTracking() {
            if (progressInterval) {
                clearInterval(progressInterval);
                progressInterval = null;
            }
        }
        
        // Update progress
        function updateProgress() {
            // Note: Web Speech API doesn't provide accurate timing
            // This is a simulation
            if (isPlaying) {
                const currentWidth = parseFloat(progressFill.style.width) || 0;
                if (currentWidth < 90) {
                    progressFill.style.width = (currentWidth + 0.5) + '%';
                }
                
                // Simulate time display
                const totalSeconds = Math.floor((textInput.value.length / 15) * 60);
                const currentSeconds = Math.floor((currentWidth / 100) * totalSeconds);
                
                const currMins = Math.floor(currentSeconds / 60);
                const currSecs = currentSeconds % 60;
                currentTime.textContent = `${currMins.toString().padStart(2, '0')}:${currSecs.toString().padStart(2, '0')}`;
                
                const totalMins = Math.floor(totalSeconds / 60);
                const totalSecs = totalSeconds % 60;
                totalTime.textContent = `${totalMins.toString().padStart(2, '0')}:${totalSecs.toString().padStart(2, '0')}`;
            }
        }
        
        // Download audio
        function downloadAudio() {
            if (!textInput.value.trim()) {
                alert('No text to convert');
                return;
            }
            
            alert('Audio download requires server-side processing. This is a client-side demo.\n\nYou can save the synthesized speech by recording your computer audio.');
        }
        
        // Clear text
        function clearText() {
            if (textInput.value.trim() && confirm('Clear all text?')) {
                textInput.value = '';
                updateTextStats();
                stop();
            }
        }
        
        // Load sample text
        function loadSample() {
            textInput.value = 'Welcome to SG Tools Text to Speech. This is a powerful utility that converts written text into natural sounding speech. You can choose from multiple voices, adjust the speaking rate, pitch, and volume. Try it now with your own text!';
            updateTextStats();
        }
        
        // Download text as file
        function downloadText() {
            if (!textInput.value.trim()) {
                alert('No text to download');
                return;
            }
            
            const blob = new Blob([textInput.value], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `sgtools-text-${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadHistory();
            updateTextStats();
            
            // Set initial slider values
            speedValue.textContent = speedSlider.value + 'x';
            pitchValue.textContent = pitchSlider.value;
            volumeValue.textContent = Math.round(volumeSlider.value * 100) + '%';
            
            // Disable stop button initially
            stopBtn.disabled = true;
            
            // Set total time estimate
            totalTime.textContent = '00:00';
            currentTime.textContent = '00:00';
        });
        
        // Export functions
        window.speak = speak;
        window.playPause = playPause;
        window.stop = stop;
        window.rewind = rewind;
        window.forward = forward;
        window.seek = seek;
        window.clearText = clearText;
        window.loadSample = loadSample;
        window.downloadText = downloadText;
        window.downloadAudio = downloadAudio;
        window.clearHistory = clearHistory;
        window.loadFromHistory = loadFromHistory;
        window.speakFromHistory = speakFromHistory;
        window.deleteHistoryItem = deleteHistoryItem;
    </script>
</body>
</html>
