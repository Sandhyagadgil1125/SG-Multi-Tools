<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech Â· SG Multi Tools</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== ULTRA-COMPACT STANDALONE (EXACT MATCH) ===== */
        body {
            background: var(--main-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
        }

        .tool-standalone {
            background: var(--button-bg-alt);
            border-radius: 20px;
            border: 1px solid var(--dark-border);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            padding: 1.2rem;
            width: 100%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            margin: auto;
        }

        .tool-standalone h1 {
            font-size: 1.3rem !important;
            margin-bottom: 0.3rem !important;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* ----- Text to Speech Specific Styles ----- */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 100px;
            padding: 0.3rem 0.8rem;
            margin-bottom: 1rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .status-led {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--text-muted);
            transition: var(--transition);
        }

        .status-led.speaking {
            background: var(--primary-accent);
            box-shadow: 0 0 8px var(--glow-shadow);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .input-group {
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .input-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .input-label i {
            color: var(--primary-accent);
            width: 18px;
            text-align: center;
        }

        #textInput {
            width: 100%;
            background: var(--button-bg-alt);
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            padding: 0.7rem 1rem;
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            outline: none;
            transition: var(--transition);
            resize: vertical;
            min-height: 100px;
        }

        #textInput:focus {
            border-color: var(--primary-accent);
            box-shadow: 0 0 0 3px var(--glow-shadow);
        }

        .text-stats {
            display: flex;
            justify-content: space-between;
            color: var(--text-muted);
            font-size: 0.65rem;
            margin-top: 0.3rem;
        }

        .voice-select {
            width: 100%;
            background: var(--button-bg-alt);
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            padding: 0.7rem 1rem;
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            outline: none;
            transition: var(--transition);
            cursor: pointer;
            margin-bottom: 0.8rem;
        }

        .voice-select:focus {
            border-color: var(--primary-accent);
            box-shadow: 0 0 0 3px var(--glow-shadow);
        }

        .slider-container {
            margin-bottom: 1rem;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.3rem;
        }

        .slider-label {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: var(--text-secondary);
            font-size: 0.75rem;
        }

        .slider-value {
            background: var(--primary-accent);
            color: var(--main-bg);
            padding: 0.15rem 0.8rem;
            border-radius: 100px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .slider {
            width: 100%;
            accent-color: var(--primary-accent);
            background: var(--dark-border);
            border-radius: 100px;
            height: 5px;
        }

        .action-buttons {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        .primary-btn {
            flex: 1;
            background: var(--primary-accent);
            color: var(--main-bg);
            border: none;
            border-radius: 16px;
            padding: 0.7rem;
            font-size: 0.95rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .primary-btn:hover {
            background: var(--accent-shade);
            box-shadow: 0 0 20px var(--glow-shadow);
            transform: translateY(-2px);
        }

        .secondary-btn {
            flex: 1;
            background: var(--button-bg);
            border: 1px solid var(--dark-border);
            border-radius: 16px;
            padding: 0.7rem;
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .secondary-btn:hover {
            background: var(--primary-accent);
            color: var(--main-bg);
            border-color: var(--primary-accent);
            box-shadow: 0 0 12px var(--glow-shadow);
        }

        .secondary-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .copy-btn {
            background: var(--button-bg);
            border: 1px solid var(--dark-border);
            border-radius: 14px;
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            transition: var(--transition);
            cursor: pointer;
            margin-left: auto;
        }

        .copy-btn:hover {
            background: var(--primary-accent);
            color: var(--main-bg);
            border-color: var(--primary-accent);
            box-shadow: 0 0 12px var(--glow-shadow);
        }

        .copy-btn.copied {
            background: var(--success-color);
            border-color: var(--success-color);
            color: var(--main-bg);
        }

        .compat-warning {
            background: rgba(66, 248, 245, 0.1);
            border: 1px solid var(--primary-accent);
            border-radius: 12px;
            padding: 0.7rem;
            color: var(--text-secondary);
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .compat-warning i {
            color: var(--primary-accent);
        }

        @media (max-width: 480px) {
            .tool-standalone {
                max-width: 100%;
                padding: 1rem;
            }
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="tool-standalone">
        <!-- Header with icon -->
        <div style="display: flex; align-items: center; gap: 0.6rem; margin-bottom: 0.8rem;">
            <div style="background: var(--primary-accent); width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--main-bg); font-size: 1.1rem;">
                <i class="fas fa-volume-up"></i>
            </div>
            <h1 style="font-size: 1.3rem; font-weight: 600; color: var(--text-primary); margin: 0;">Text to Speech</h1>
        </div>

        <!-- Browser Compatibility Warning (shown only if unsupported) -->
        <div id="compatWarning" class="compat-warning" style="display: none;">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Your browser doesn't support speech synthesis. Please use Chrome, Edge, Safari, or modern browsers.</span>
        </div>

        <!-- Status Indicator -->
        <div class="status-indicator">
            <div id="statusLed" class="status-led"></div>
            <span id="statusText">Ready</span>
            <span style="margin-left: auto; font-size: 0.7rem;" id="voiceDisplay">Default voice</span>
        </div>

        <!-- Text Input -->
        <div class="input-group">
            <div class="input-label">
                <i class="fas fa-pencil-alt"></i>
                <span>Enter text</span>
            </div>
            <textarea id="textInput" placeholder="Type or paste your text here...">Hello, this is a sample text to speech demonstration.</textarea>
            <div class="text-stats">
                <span id="charCount">48 characters</span>
                <span id="wordCount">8 words</span>
            </div>
        </div>

        <!-- Voice Selection -->
        <div class="input-group" style="margin-bottom: 0.5rem;">
            <div class="input-label">
                <i class="fas fa-user-voice"></i>
                <span>Voice</span>
            </div>
            <select id="voiceSelect" class="voice-select">
                <option value="">Loading voices...</option>
            </select>
        </div>

        <!-- Speed Control -->
        <div class="slider-container">
            <div class="slider-header">
                <span class="slider-label">
                    <i class="fas fa-tachometer-alt"></i> Speed
                </span>
                <span id="speedValue" class="slider-value">1.0x</span>
            </div>
            <input type="range" id="speedSlider" class="slider" min="0.5" max="2.0" value="1.0" step="0.1">
        </div>

        <!-- Pitch Control -->
        <div class="slider-container">
            <div class="slider-header">
                <span class="slider-label">
                    <i class="fas fa-chart-line"></i> Pitch
                </span>
                <span id="pitchValue" class="slider-value">1.0</span>
            </div>
            <input type="range" id="pitchSlider" class="slider" min="0.5" max="2.0" value="1.0" step="0.1">
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="speakBtn" class="primary-btn">
                <i class="fas fa-play"></i> Speak
            </button>
            <button id="pauseBtn" class="secondary-btn" disabled>
                <i class="fas fa-pause"></i> Pause
            </button>
            <button id="stopBtn" class="secondary-btn" disabled>
                <i class="fas fa-stop"></i> Stop
            </button>
        </div>

        <!-- Copy & Clear Row -->
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <button id="clearBtn" class="secondary-btn" style="flex: 1;">
                <i class="fas fa-trash-alt"></i> Clear
            </button>
            <button id="copyBtn" class="copy-btn">
                <i class="fas fa-copy"></i> Copy
            </button>
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            // ---------- DOM Elements ----------
            const textInput = document.getElementById('textInput');
            const voiceSelect = document.getElementById('voiceSelect');
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            const pitchSlider = document.getElementById('pitchSlider');
            const pitchValue = document.getElementById('pitchValue');
            const speakBtn = document.getElementById('speakBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const stopBtn = document.getElementById('stopBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const charCount = document.getElementById('charCount');
            const wordCount = document.getElementById('wordCount');
            const statusLed = document.getElementById('statusLed');
            const statusText = document.getElementById('statusText');
            const voiceDisplay = document.getElementById('voiceDisplay');
            const compatWarning = document.getElementById('compatWarning');

            // ---------- State ----------
            let voices = [];
            let isSpeaking = false;
            let isPaused = false;
            let utterance = null;
            let isSupported = true;

            // ---------- Check Browser Support ----------
            if (!window.speechSynthesis) {
                isSupported = false;
                compatWarning.style.display = 'flex';
                speakBtn.disabled = true;
                speakBtn.style.opacity = '0.5';
                speakBtn.style.cursor = 'not-allowed';
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                statusText.textContent = 'Not supported';
            }

            // ---------- Load Voices ----------
            function loadVoices() {
                if (!isSupported) return;
                
                voices = speechSynthesis.getVoices();
                
                // Clear select
                voiceSelect.innerHTML = '';
                
                if (voices.length === 0) {
                    const option = document.createElement('option');
                    option.textContent = 'No voices available';
                    option.disabled = true;
                    option.selected = true;
                    voiceSelect.appendChild(option);
                    return;
                }
                
                // Populate dropdown
                voices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})${voice.default ? ' [Default]' : ''}`;
                    voiceSelect.appendChild(option);
                });
                
                // Select default voice
                const defaultIndex = voices.findIndex(voice => voice.default);
                if (defaultIndex !== -1) {
                    voiceSelect.value = defaultIndex;
                    updateVoiceDisplay();
                }
            }

            // ---------- Update Voice Display ----------
            function updateVoiceDisplay() {
                const selectedIndex = voiceSelect.value;
                if (selectedIndex && voices[selectedIndex]) {
                    const voice = voices[selectedIndex];
                    voiceDisplay.textContent = voice.name.split(' ').slice(0, 2).join(' ') || voice.name;
                } else {
                    voiceDisplay.textContent = 'Default voice';
                }
            }

            // ---------- Update Text Stats ----------
            function updateStats() {
                const text = textInput.value;
                const charCountVal = text.length;
                const wordCountVal = text.trim() ? text.trim().split(/\s+/).length : 0;
                
                charCount.textContent = `${charCountVal} character${charCountVal !== 1 ? 's' : ''}`;
                wordCount.textContent = `${wordCountVal} word${wordCountVal !== 1 ? 's' : ''}`;
            }

            // ---------- Update Slider Displays ----------
            function updateSliderDisplays() {
                speedValue.textContent = `${parseFloat(speedSlider.value).toFixed(1)}x`;
                pitchValue.textContent = parseFloat(pitchSlider.value).toFixed(1);
            }

            // ---------- Speak Text ----------
            function speak() {
                if (!isSupported) {
                    alert('Speech synthesis is not supported in your browser.');
                    return;
                }
                
                const text = textInput.value.trim();
                if (!text) {
                    alert('Please enter some text to speak.');
                    return;
                }
                
                // Stop any ongoing speech
                speechSynthesis.cancel();
                
                // Create new utterance
                utterance = new SpeechSynthesisUtterance(text);
                
                // Set voice
                const selectedIndex = voiceSelect.value;
                if (selectedIndex && voices[selectedIndex]) {
                    utterance.voice = voices[selectedIndex];
                }
                
                // Set rate and pitch
                utterance.rate = parseFloat(speedSlider.value);
                utterance.pitch = parseFloat(pitchSlider.value);
                
                // Event handlers
                utterance.onstart = function() {
                    isSpeaking = true;
                    isPaused = false;
                    statusLed.classList.add('speaking');
                    statusText.textContent = 'Speaking...';
                    speakBtn.disabled = true;
                    pauseBtn.disabled = false;
                    stopBtn.disabled = false;
                };
                
                utterance.onend = function() {
                    isSpeaking = false;
                    isPaused = false;
                    statusLed.classList.remove('speaking');
                    statusText.textContent = 'Ready';
                    speakBtn.disabled = false;
                    pauseBtn.disabled = true;
                    stopBtn.disabled = true;
                    pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                };
                
                utterance.onerror = function(event) {
                    console.error('Speech synthesis error:', event);
                    isSpeaking = false;
                    isPaused = false;
                    statusLed.classList.remove('speaking');
                    statusText.textContent = 'Error';
                    speakBtn.disabled = false;
                    pauseBtn.disabled = true;
                    stopBtn.disabled = true;
                    pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                };
                
                utterance.onpause = function() {
                    isPaused = true;
                    statusText.textContent = 'Paused';
                    pauseBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                };
                
                utterance.onresume = function() {
                    isPaused = false;
                    statusText.textContent = 'Speaking...';
                    pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                };
                
                // Speak
                speechSynthesis.speak(utterance);
            }

            // ---------- Pause/Resume ----------
            function togglePause() {
                if (!isSpeaking) return;
                
                if (isPaused) {
                    speechSynthesis.resume();
                } else {
                    speechSynthesis.pause();
                }
            }

            // ---------- Stop Speaking ----------
            function stop() {
                speechSynthesis.cancel();
                isSpeaking = false;
                isPaused = false;
                statusLed.classList.remove('speaking');
                statusText.textContent = 'Ready';
                speakBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
                pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
            }

            // ---------- Clear Text ----------
            function clearText() {
                textInput.value = '';
                updateStats();
                stop();
            }

            // ---------- Copy Text to Clipboard ----------
            function copyText() {
                const text = textInput.value;
                if (!text) {
                    alert('Nothing to copy.');
                    return;
                }
                
                navigator.clipboard.writeText(text).then(() => {
                    copyBtn.classList.add('copied');
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.classList.remove('copied');
                        copyBtn.innerHTML = originalHTML;
                    }, 2000);
                }).catch(() => {
                    alert('Failed to copy. Please copy manually.');
                });
            }

            // ---------- Event Listeners ----------
            // Text input
            textInput.addEventListener('input', updateStats);
            
            // Sliders
            speedSlider.addEventListener('input', function() {
                speedValue.textContent = `${parseFloat(speedSlider.value).toFixed(1)}x`;
            });
            pitchSlider.addEventListener('input', function() {
                pitchValue.textContent = parseFloat(pitchSlider.value).toFixed(1);
            });
            
            // Voice select
            voiceSelect.addEventListener('change', updateVoiceDisplay);
            
            // Buttons
            speakBtn.addEventListener('click', speak);
            pauseBtn.addEventListener('click', togglePause);
            stopBtn.addEventListener('click', stop);
            clearBtn.addEventListener('click', clearText);
            copyBtn.addEventListener('click', copyText);
            
            // ---------- Voice Loading (handles async) ----------
            if (isSupported) {
                // Chrome loads voices asynchronously
                speechSynthesis.onvoiceschanged = function() {
                    loadVoices();
                };
                
                // Initial load
                loadVoices();
                
                // Some browsers (Safari) might have voices already
                if (voices.length === 0) {
                    voices = speechSynthesis.getVoices();
                    if (voices.length > 0) {
                        loadVoices();
                    }
                }
            }

            // ---------- Initial Updates ----------
            updateStats();
            updateSliderDisplays();
            updateVoiceDisplay();
        })();
    </script>
</body>
</html>
