<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text to Speech | SG Multi Tools</title>

<link rel="icon" href="favicon.png">
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="single-tool">
  <div class="tool-wrapper">

    <button class="close-btn" onclick="location.href='index.html'">√ó</button>

    <h2>Text to Speech</h2>
    <p class="description">
      Convert written text into natural-sounding speech
    </p>

    <label>Enter Text</label>
    <textarea id="textInput" rows="6"
      placeholder="Type or paste text here..."></textarea>

    <label>Voice</label>
    <select id="voiceSelect"></select>

    <div class="calc-grid" style="grid-template-columns:repeat(3,1fr);">
      <button onclick="speakText()">Speak</button>
      <button onclick="stopSpeech()">Stop</button>
      <button onclick="clearText()">Clear</button>
    </div>

    <div class="result" id="statusBox" style="display:none;"></div>

  </div>
</div>

<script>
const textInput = document.getElementById("textInput");
const voiceSelect = document.getElementById("voiceSelect");
const statusBox = document.getElementById("statusBox");

let voices = [];
let utterance;

function loadVoices(){
  voices = speechSynthesis.getVoices();
  voiceSelect.innerHTML = "";
  voices.forEach((voice, i) => {
    const option = document.createElement("option");
    option.value = i;
    option.textContent = `${voice.name} (${voice.lang})`;
    voiceSelect.appendChild(option);
  });
}

speechSynthesis.onvoiceschanged = loadVoices;

function speakText(){
  const text = textInput.value.trim();
  if(!text){
    alert("Please enter some text");
    return;
  }

  stopSpeech();

  utterance = new SpeechSynthesisUtterance(text);
  utterance.voice = voices[voiceSelect.value] || voices[0];

  utterance.onstart = () => showStatus("üîä Speaking...");
  utterance.onend = () => showStatus("‚úÖ Finished");

  speechSynthesis.speak(utterance);
}

function stopSpeech(){
  if(speechSynthesis.speaking){
    speechSynthesis.cancel();
    showStatus("‚èπ Stopped");
  }
}

function clearText(){
  textInput.value = "";
  statusBox.style.display = "none";
}

function showStatus(msg){
  statusBox.style.display = "block";
  statusBox.innerHTML = `<strong>${msg}</strong>`;
}

loadVoices();
</script>

</body>
</html>
