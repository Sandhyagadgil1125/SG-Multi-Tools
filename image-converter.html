<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Converter | SG Multi Tools</title>
  <meta name="description" content="Convert images between PNG, JPG, GIF, and WebP easily using SG Multi Tools Image Converter.">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BT8RQZBBTQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BT8RQZBBTQ');
  </script>

  <!-- Global CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

<div class="tool-wrapper">
  <!-- Close button -->
  <span class="close-btn" onclick="location.href='index.html'">âœ•</span>

  <!-- Tool Title -->
  <h2>Image Converter</h2>
  <div class="description">
    Convert images between PNG, JPG, GIF, and WebP formats easily.
  </div>

  <!-- File Input -->
  <div class="flexbox">
    <label for="imageInput">Select Image:</label>
    <input type="file" id="imageInput" accept="image/*">
  </div>

  <!-- Format Selection -->
  <div class="flexbox">
    <label for="formatSelect">Convert To:</label>
    <select id="formatSelect">
      <option value="png">PNG</option>
      <option value="jpg">JPG</option>
      <option value="webp">WebP</option>
      <option value="gif">GIF</option>
    </select>
  </div>

  <!-- Convert Button -->
  <div class="flexbox">
    <button onclick="convertImage()">Convert</button>
  </div>

  <!-- Result -->
  <div class="flexbox result" id="result">
    Converted image will appear here
  </div>
</div>

<script>
function convertImage() {
  const fileInput = document.getElementById('imageInput');
  const format = document.getElementById('formatSelect').value;
  const resultDiv = document.getElementById('result');

  if (!fileInput.files || fileInput.files.length === 0) {
    resultDiv.innerText = "Please select an image";
    return;
  }

  const file = fileInput.files[0];
  const reader = new FileReader();

  reader.onload = function(e) {
    const img = new Image();
    img.src = e.target.result;

    img.onload = function() {
      const canvas = document.createElement('canvas');
      canvas.width = img.width;
      canvas.height = img.height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0);

      let mimeType = 'image/png';
      if (format === 'jpg') mimeType = 'image/jpeg';
      else if (format === 'webp') mimeType = 'image/webp';
      else if (format === 'gif') mimeType = 'image/gif';

      const dataURL = canvas.toDataURL(mimeType);

      const link = document.createElement('a');
      link.href = dataURL;
      link.download = `converted.${format}`;
      link.innerText = `Download ${format.toUpperCase()} Image`;
      link.style.display = 'block';
      link.style.marginTop = '10px';
      link.style.color = '#42f8f5';
      resultDiv.innerHTML = '';
      resultDiv.appendChild(link);
    }
  }

  reader.readAsDataURL(file);
}
</script>

</body>
</html>
