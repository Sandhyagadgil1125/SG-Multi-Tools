<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGTech Multi Tools | Export Enabled</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg-main: #080a0e; --bg-nav: #12161f; --bg-card: #161b22;
            --accent: #42f8f5; --accent-glow: rgba(66, 248, 245, 0.3);
            --card-border: rgba(66, 248, 245, 0.1); --transition: all 0.3s ease;
        }
        [data-theme="light"] {
            --bg-main: #f0f2f5; --bg-nav: #ffffff; --bg-card: #ffffff;
            --accent: #0062ff; --accent-glow: rgba(0, 98, 255, 0.2);
            --card-border: rgba(0, 98, 255, 0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; color: var(--accent) !important; }
        body { background-color: var(--bg-main); transition: background 0.4s; padding-top: 80px; }
        .navbar { background: var(--bg-nav); padding: 0.7rem 5%; position: fixed; top: 0; width: 100%; z-index: 1000; border-bottom: 1px solid var(--accent); display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .sg-box { border: 2px solid var(--accent); font-weight: 900; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px; box-shadow: 0 0 12px var(--accent-glow); }
        .tool-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; padding: 30px 5%; }
        .tool-card { background: var(--bg-card); padding: 25px; border-radius: 15px; border: 1px solid var(--card-border); text-align: center; transition: var(--transition); }
        .tool-card:hover { border-color: var(--accent); transform: translateY(-5px); box-shadow: 0 8px 25px var(--accent-glow); }
        .launch-btn { background: transparent; border: 2px solid var(--accent); padding: 10px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 15px; text-transform: uppercase; }
        .launch-btn:hover { background: var(--accent); color: var(--bg-nav) !important; }
        .download-btn { background: transparent; border: 1px solid var(--accent); padding: 8px; border-radius: 5px; cursor: pointer; width: 100%; margin-top: 10px; display: none; font-size: 0.8rem; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); overflow-y: auto; }
        .modal-content { background: var(--bg-nav); margin: 5vh auto; padding: 30px; border: 2px solid var(--accent); width: 90%; max-width: 550px; border-radius: 25px; position: relative; }
        .close-modal { position: absolute; right: 20px; top: 10px; font-size: 30px; cursor: pointer; }
        input, textarea, select { background: var(--bg-main); border: 1px solid var(--accent); padding: 12px; border-radius: 10px; width: 100%; margin-bottom: 10px; outline: none; }
        .result-box { margin-top: 15px; padding: 15px; border: 1px dashed var(--accent); border-radius: 10px; white-space: pre-wrap; word-break: break-all; min-height: 40px; }
    </style>
</head>
<body data-theme="dark">

    <nav class="navbar">
        <a href="#" class="logo"><div class="sg-box">SG</div><div class="brand-name">SGTech Multi Tools</div></a>
        <button class="launch-btn" style="width:auto; padding: 5px 15px;" onclick="toggleTheme()">Theme Toggle</button>
    </nav>

    <div id="tool-grid" class="tool-grid"></div>

    <div id="tool-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-interface"></div>
        </div>
    </div>

    <script>
        const tools = [
            { id: 'age', icon: 'fa-calendar', name: 'Age Calculator', file: false },
            { id: 'pass', icon: 'fa-lock', name: 'Password Gen', file: true },
            { id: 'word', icon: 'fa-file-lines', name: 'Word Counter', file: true },
            { id: 'qr', icon: 'fa-qrcode', name: 'QR Generator', file: false },
            { id: 'bmi', icon: 'fa-weight', name: 'BMI Calculator', file: false },
            { id: 'emi', icon: 'fa-money-check-dollar', name: 'EMI Calculator', file: false },
            { id: 'unit', icon: 'fa-ruler-combined', name: 'Unit Converter', file: false },
            { id: 'temp', icon: 'fa-thermometer', name: 'Temp Converter', file: false },
            { id: 'json', icon: 'fa-brackets-curly', name: 'JSON Beautifier', file: true },
            { id: 'base64', icon: 'fa-barcode', name: 'Base64 Tool', file: true },
            { id: 'case', icon: 'fa-text-height', name: 'Case Converter', file: true },
            { id: 'binary', icon: 'fa-microchip', name: 'Binary Tool', file: true },
            { id: 'lorem', icon: 'fa-paragraph', name: 'Lorem Ipsum', file: true },
            { id: 'perc', icon: 'fa-percent', name: 'Percentage Calc', file: false },
            { id: 'color', icon: 'fa-eye-dropper', name: 'Color Converter', file: false },
            { id: 'rev', icon: 'fa-rotate-left', name: 'Reverse Text', file: true },
            { id: 'sort', icon: 'fa-arrow-down-a-z', name: 'List Sorter', file: true },
            { id: 'extract', icon: 'fa-hashtag', name: 'Digit Extractor', file: true },
            { id: 'replace', icon: 'fa-magnifying-glass', name: 'Find & Replace', file: true },
            { id: 'stopwatch', icon: 'fa-stopwatch', name: 'Stopwatch', file: false }
        ];

        const grid = document.getElementById('tool-grid');
        tools.forEach(t => {
            grid.innerHTML += `<div class="tool-card"><i class="fas ${t.icon} fa-2xl"></i><h3>${t.name}</h3><button class="launch-btn" onclick="openTool('${t.id}')">Open</button></div>`;
        });

        function openTool(id) {
            const tool = tools.find(t => t.id === id);
            let html = `<h2>${tool.name}</h2><br>`;
            switch(id) {
                case 'age': html += `<input type="date" id="v1">`; break;
                case 'pass': html += `<input type="number" id="v1" placeholder="Length" value="16">`; break;
                case 'word': case 'json': case 'base64': case 'case': case 'binary': case 'rev': case 'sort': case 'extract':
                    html += `<textarea id="v1" rows="5" placeholder="Enter text..."></textarea>`; break;
                case 'qr': html += `<input type="text" id="v1" placeholder="URL or Text">`; break;
                case 'bmi': html += `<input type="number" id="v1" placeholder="Height (cm)"><input type="number" id="v2" placeholder="Weight (kg)">`; break;
                case 'emi': html += `<input type="number" id="v1" placeholder="Principal"><input type="number" id="v2" placeholder="Rate %"><input type="number" id="v3" placeholder="Months">`; break;
                case 'unit': html += `<input type="number" id="v1" placeholder="Value"><select id="v2"><option value="k-m">KM to Miles</option><option value="c-i">CM to Inches</option></select>`; break;
                case 'temp': html += `<input type="number" id="v1" placeholder="Temp"><select id="v2"><option value="c-f">C to F</option></select>`; break;
                case 'lorem': html += `<input type="number" id="v1" placeholder="Paragraphs" value="3">`; break;
                case 'perc': html += `<input type="number" id="v1" placeholder="%"><input type="number" id="v2" placeholder="Value">`; break;
                case 'color': html += `<input type="text" id="v1" placeholder="#HEX">`; break;
                case 'replace': html += `<textarea id="v1" placeholder="Text"></textarea><input type="text" id="v2" placeholder="Find"><input type="text" id="v3" placeholder="Replace">`; break;
                case 'stopwatch': html += `<div id="sw" style="font-size:2.5rem; margin:15px 0;">00:00:00</div><button class="launch-btn" onclick="toggleSW()">Start/Stop</button>`; break;
            }
            if(id !== 'stopwatch') html += `<button class="launch-btn" onclick="runLogic('${id}')">Process Result</button>`;
            html += `<div class="result-box" id="res">Output...</div>`;
            if(tool.file) html += `<button id="dl-btn" class="download-btn" onclick="downloadFile('${id}')"><i class="fas fa-download"></i> Download as .txt</button>`;
            
            document.getElementById('modal-interface').innerHTML = html;
            document.getElementById('tool-modal').style.display = "block";
        }

        function runLogic(id) {
            const v1 = document.getElementById('v1')?.value, v2 = document.getElementById('v2')?.value, v3 = document.getElementById('v3')?.value, res = document.getElementById('res');
            const dlBtn = document.getElementById('dl-btn');
            try {
                switch(id) {
                    case 'age': res.innerText = Math.floor((new Date() - new Date(v1)) / 31557600000) + " Years"; break;
                    case 'pass': let c="abcdefghijk123456!@#", p=""; for(let i=0;i<v1;i++) p+=c.charAt(Math.floor(Math.random()*c.length)); res.innerText = p; break;
                    case 'word': res.innerText = `Words: ${v1.split(/\s+/).filter(x=>x).length}\nChars: ${v1.length}`; break;
                    case 'json': res.innerText = JSON.stringify(JSON.parse(v1), null, 4); break;
                    case 'base64': res.innerText = btoa(v1); break;
                    case 'lorem': res.innerText = "Lorem ipsum dolor sit amet. ".repeat(v1); break;
                    case 'replace': res.innerText = v1.replaceAll(v2, v3); break;
                    case 'qr': res.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?data=${v1}">`; break;
                    case 'bmi': res.innerText = "BMI: " + (v2 / ((v1/100)**2)).toFixed(2); break;
                    case 'case': res.innerText = v1.toUpperCase(); break;
                    default: res.innerText = "Processed successfully.";
                }
                if(dlBtn) dlBtn.style.display = "block";
            } catch(e) { res.innerText = "Error in input."; }
        }

        function downloadFile(id) {
            const content = document.getElementById('res').innerText;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `sgtech_${id}_result.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        let swI, swS=0;
        function toggleSW() { if(swI){ clearInterval(swI); swI=null; } else { swI=setInterval(()=>{swS++; document.getElementById('sw').innerText=new Date(swS*1000).toISOString().substr(11,8)},1000); }}
        function toggleTheme() { document.body.setAttribute('data-theme', document.body.getAttribute('data-theme')==='dark'?'light':'dark'); }
        function closeModal() { document.getElementById('tool-modal').style.display="none"; clearInterval(swI); swI=null; swS=0; }
    </script>
</body>
</html>
