<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ===========================
         SEO & METADATA
         =========================== -->
    <title>SG-Multi-Tools | Free Online Premium Tools for Daily Use</title>
    <meta name="description" content="SG Multi Tools - A premium, free suite of 20+ online tools. Convert images, calculate EMI/BMI, generate passwords, and more. Fast, secure, and privacy-focused running directly in your browser.">
    <meta name="keywords" content="SG Multi Tools, sgtools.in, Image Converter, Compress Image, Age Calculator, BMI Calculator, EMI Calculator, QR Generator, Online Tools">
    <meta name="author" content="SG Multi Tools">
    
    <!-- Open Graph / Social Sharing -->
    <meta property="og:title" content="SG Multi Tools - Premium Frontend Suite">
    <meta property="og:description" content="20+ Modern tools including Image Converters, Calculators, and Developer Utilities. No backend, purely client-side.">
    <meta property="og:url" content="https://sgtools.in">
    <meta property="og:type" content="website">

    <!-- ===========================
         FAVICON (Auto-Generated SG Logo)
         =========================== -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect x='0' y='0' width='64' height='64' rx='12' fill='%231c222d' stroke='%2342f8f5' stroke-width='4'/%3E%3Ctext x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial, sans-serif' font-weight='900' font-size='32' fill='%2342f8f5'%3ESG%3C/text%3E%3C/svg%3E">

    <style>
        /* ===========================
           1. VARIABLES & THEME
           =========================== */
        :root {
            --bg-main: #0d0f14;
            --bg-nav: #1c222d;
            --bg-card: #12151a;
            --accent-primary: #42f8f5;
            --accent-secondary: #3ff7f3;
            --text-primary: #ffffff;
            --text-secondary: #c5d1de;
            --glow-color: rgba(66, 248, 245, 0.6);
            --border-radius: 8px;
            --transition-speed: 0.3s;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        /* ===========================
           2. HEADER & NAV
           =========================== */
        
        nav {
            background-color: var(--bg-nav);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(66, 248, 245, 0.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        /* Logo Styling */
        .brand-container {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: white;
            cursor: pointer;
        }

        .sg-logo {
            background: linear-gradient(135deg, var(--bg-nav), #000);
            color: var(--accent-primary);
            border: 2px solid var(--accent-primary);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.2rem;
            border-radius: 8px;
            box-shadow: 0 0 10px var(--glow-color);
            text-shadow: 0 0 5px var(--accent-primary);
            letter-spacing: -1px;
        }

        .brand-text {
            font-size: 1.3rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            margin-left: 20px;
            transition: var(--transition-speed);
            cursor: pointer;
            font-size: 1rem;
        }

        .nav-links a:hover, .nav-links a.active {
            color: var(--accent-primary);
            text-shadow: 0 0 8px var(--glow-color);
        }

        /* Mobile Menu adjustment */
        @media (max-width: 768px) {
            nav { padding: 1rem; }
            .brand-text { display: none; } 
            .nav-links a { margin-left: 10px; font-size: 0.9rem; }
        }

        /* ===========================
           3. MAIN LAYOUT
           =========================== */
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 50px 20px;
        }

        h1.section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.5rem;
        }

        h1 span { 
            color: var(--accent-primary); 
            display: inline-block;
            text-shadow: 0 0 20px rgba(66, 248, 245, 0.25);
        }

        /* Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }

        @media (max-width: 900px) { .tools-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 600px) { .tools-grid { grid-template-columns: 1fr; } }

        /* Tool Cards */
        .tool-card {
            background-color: var(--bg-card);
            border: 1px solid #2a303c;
            border-radius: var(--border-radius);
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px var(--glow-color);
        }

        .tool-card h2 {
            font-size: 1.25rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .tool-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            flex-grow: 1;
            margin-bottom: 20px;
        }

        /* Button Standard */
        .btn-neon {
            background: transparent;
            color: var(--accent-primary);
            border: 2px solid var(--accent-primary);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-decoration: none; 
            display: inline-block;
        }

        .btn-neon:hover {
            background-color: var(--accent-primary);
            color: #000;
            box-shadow: 0 0 15px var(--accent-primary);
        }

        /* ===========================
           4. MODAL UI
           =========================== */
        
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(5px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: var(--bg-card);
            width: 90%;
            max-width: 600px;
            border: 1px solid var(--accent-primary);
            border-radius: var(--border-radius);
            box-shadow: 0 0 30px rgba(66, 248, 245, 0.2);
            padding: 30px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }

        .modal-header h2 { color: var(--text-primary); }

        .close-btn {
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-secondary);
            line-height: 0.8;
        }

        .close-btn:hover { color: var(--accent-primary); }

        /* Input Styles inside Modal */
        .input-group { margin-bottom: 15px; text-align: left; }
        .input-group label { display: block; margin-bottom: 8px; color: var(--text-secondary); font-size: 0.9rem; }
        
        .input-group input, 
        .input-group select, 
        .input-group textarea {
            width: 100%;
            background: #0d0f14;
            border: 1px solid #333;
            color: white;
            padding: 12px;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus, 
        .input-group textarea:focus { 
            border-color: var(--accent-primary); 
            outline: none; 
            box-shadow: 0 0 5px rgba(66,248,245,0.3);
        }
        
        .result-box {
            margin-top: 20px;
            background: #1c222d;
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid var(--accent-primary);
            word-wrap: break-word;
            display: none; 
            animation: slideDown 0.3s;
        }

        canvas { max-width: 100%; border: 1px solid #333; margin-top: 10px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideDown { from { transform: translateY(-10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* ===========================
   FOOTER
   =========================== */
.site-footer {
    background: var(--bg-nav);
    border-top: 1px solid rgba(66, 248, 245, 0.15);
    text-align: center;
    padding: 20px 10px;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.site-footer a {
    color: var(--accent-primary);
    text-decoration: none;
    margin: 0 8px;
}

.site-footer a:hover {
    text-shadow: 0 0 8px var(--glow-color);
}

    </style>
</head>
<body>

    <!-- Header -->
    <nav>
        <div class="brand-container" onclick="location.reload()">
            <div class="sg-logo">SG</div>
            <div class="brand-text">SG Multi Tools</div>
        </div>
        <div class="nav-links">
            <a href="#" onclick="closeModal()">Home</a>
            <a href="#about" onclick="openAbout()">About</a>
            <a href="#tools" onclick="closeModal()">Tools</a>
            <a href="#contact" onclick="openContact()">Contact</a>
        </div>
    </nav>

    <!-- Main Section -->
    <div class="container" id="tools">
        <h1 class="section-title">SG Multi Tools <span>For Daily Use</span></h1>
        <div class="tools-grid" id="toolsGrid">
            <!-- Tool Cards are generated by JS -->
        </div>
    </div>

    <!-- Modal Container (Used for Tools, Contact, and About) -->
    <div id="modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Title</h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <div id="modal-body">
                <!-- Content injected here -->
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // 1. DATA: TOOLS & CONTENT
        // ============================================

        const contactEmail = "contact@sgtools.in";
        const tools = [
            // --- Media Tools ---
            {
                id: 1, name: "Image Converter", desc: "Convert PNG to JPG, WEBP etc.", 
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Upload Image</label><input type="file" id="imgInput" accept="image/*"></div>
                        <div class="input-group"><label>Convert To</label>
                            <select id="formatSelect">
                                <option value="image/jpeg">JPEG</option>
                                <option value="image/png">PNG</option>
                                <option value="image/webp">WEBP</option>
                            </select>
                        </div>
                        <button class="btn-neon" onclick="toolsLogic.convertImage()">Convert</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            {
                id: 2, name: "Image Compressor", desc: "Reduce file size significantly.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Upload Image</label><input type="file" id="imgCompInput" accept="image/*"></div>
                        <div class="input-group"><label>Compression (Low to High Quality)</label><input type="range" id="qualityRange" min="0.1" max="1" step="0.1" value="0.6"></div>
                        <button class="btn-neon" onclick="toolsLogic.compressImage()">Compress</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            {
                id: 3, name: "Base64 Helper", desc: "Encode/Decode Base64 strings.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><select id="b64action"><option value="enc">Encode Text to Base64</option><option value="dec">Decode Base64 to Text</option></select></div>
                        <div class="input-group"><textarea id="b64Input" placeholder="Enter string..." rows="4"></textarea></div>
                        <button class="btn-neon" onclick="toolsLogic.base64Func()">Process</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            
            // --- Calculators ---
            {
                id: 4, name: "Age Calculator", desc: "Exact age in years, months, days.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Date of Birth</label><input type="date" id="dobInput"></div>
                        <button class="btn-neon" onclick="toolsLogic.calcAge()">Calculate</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            {
                id: 5, name: "BMI Calculator", desc: "Body Mass Index & Health Status.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Weight (kg)</label><input type="number" id="weight" placeholder="e.g. 70"></div>
                        <div class="input-group"><label>Height (cm)</label><input type="number" id="height" placeholder="e.g. 175"></div>
                        <button class="btn-neon" onclick="toolsLogic.calcBMI()">Calculate</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            {
                id: 6, name: "EMI Calculator", desc: "Monthly Loan Repayment Planner.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Loan Amount</label><input type="number" id="p" placeholder="Total Amount"></div>
                        <div class="input-group"><label>Interest Rate (%)</label><input type="number" id="r" placeholder="Yearly Rate"></div>
                        <div class="input-group"><label>Tenure (Months)</label><input type="number" id="n" placeholder="Total Months"></div>
                        <button class="btn-neon" onclick="toolsLogic.calcEMI()">Calculate EMI</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            {
                id: 7, name: "SIP Calculator", desc: "Wealth Growth Estimator.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Monthly Investment</label><input type="number" id="monthly" placeholder="Amount"></div>
                        <div class="input-group"><label>Expected Return Rate (%)</label><input type="number" id="rate" placeholder="Yearly %"></div>
                        <div class="input-group"><label>Time Period (Years)</label><input type="number" id="years" placeholder="Duration"></div>
                        <button class="btn-neon" onclick="toolsLogic.calcSIP()">Forecast Wealth</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },

            // --- Dev & Utility ---
            {
                id: 8, name: "QR Generator", desc: "Create QR codes for Links/Text.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Enter URL or Text</label><input type="text" id="qrText" placeholder="https://sgtools.in"></div>
                        <button class="btn-neon" onclick="toolsLogic.genQR()">Generate QR</button>
                        <div class="result-box" id="resultArea" style="text-align:center;"></div>
                    `;
                }
            },
            {
                id: 9, name: "Secure Password", desc: "Generate strong passwords.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Password Length</label><input type="number" id="pwdLen" value="16" min="6" max="50"></div>
                        <button class="btn-neon" onclick="toolsLogic.genPass()">Generate</button>
                        <div class="result-box" id="resultArea"></div>
                    `;
                }
            },
            {
                id: 10, name: "Color Picker", desc: "Identify HEX, RGB, & Preview.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Select Color</label><input type="color" id="colorInput" onchange="toolsLogic.pickColor()" style="height:60px; padding:0;"></div>
                        <div class="result-box" id="resultArea" style="display:block;">Hex/RGB values will appear here.</div>
                    `;
                }
            },
            {
                id: 11, name: "Word Counter", desc: "Real-time Text Analysis.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Type Text Below</label><textarea id="wordInput" rows="6" oninput="toolsLogic.countWord()"></textarea></div>
                        <div class="result-box" id="resultArea" style="display:block;">Words: 0 | Characters: 0</div>
                    `;
                }
            },
            {
                id: 12, name: "Text to Speech", desc: "Browser-based text reader.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Text to Speak</label><textarea id="ttsInput" rows="4"></textarea></div>
                        <button class="btn-neon" onclick="toolsLogic.speakText()">Play Audio</button>
                    `;
                }
            },
            {
                id: 13, name: "Speech to Text", desc: "Dictate text using microphone.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="result-box" id="resultArea" style="display:block; min-height:80px;">Microphone Status: Idle</div>
                        <button class="btn-neon" id="micBtn" onclick="toolsLogic.toggleMic()">Start Recording</button>
                    `;
                }
            },
            {
                id: 14, name: "JSON Formatter", desc: "Prettify minified JSON.",
                func: (box) => {
                    box.innerHTML = `
                        <div class="input-group"><label>Paste Raw JSON</label><textarea id="jsonInput" rows="5"></textarea></div>
                        <button class="btn-neon" onclick="toolsLogic.formatJSON()">Format</button>
                        <div class="input-group" style="margin-top:15px;"><label>Result</label><textarea id="jsonOutput" rows="8" readonly></textarea></div>
                    `;
                }
            },
            {
                id: 15, name: "Stopwatch", desc: "Track time precisely.",
                func: (box) => {
                    box.innerHTML = `
                        <h1 id="swDisplay" style="text-align:center; font-size:3rem; font-family:monospace; margin:30px 0;">00:00:00</h1>
                        <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px;">
                            <button class="btn-neon" onclick="toolsLogic.startWatch()">Start</button>
                            <button class="btn-neon" style="border-color:#ff4d4d; color:#ff4d4d;" onclick="toolsLogic.stopWatch()">Stop</button>
                            <button class="btn-neon" style="border-color:#fff; color:#fff;" onclick="toolsLogic.resetWatch()">Reset</button>
                        </div>
                    `;
                }
            },
            {
                id: 16, name: "Audio Player", desc: "Preview Local Audio Files.",
                func: (box) => { box.innerHTML = `<div class="input-group"><label>Load Audio File</label><input type="file" id="audInput" accept="audio/*" onchange="toolsLogic.loadAudioPreview(this)"></div><audio id="audioPreview" controls style="width:100%; margin-top:15px;"></audio>`; }
            },
            { id: 17, name: "Unit Converter", desc: "Miles, KGs, Celsius etc.", func: (box) => { box.innerHTML = toolsLogic.getUnitHTML(); } },
            { id: 18, name: "Tip Splitter", desc: "Bill calculator for groups.", func: (box) => { box.innerHTML = toolsLogic.getTipHTML(); } },
            { id: 19, name: "Digital Clock", desc: "Current Date and Time.", func: (box) => { box.innerHTML = `<h2 id="liveClock" style="text-align:center; font-size:2.5rem; margin-top:20px; color:var(--accent-primary);"></h2><p id="liveDate" style="text-align:center; color:var(--text-secondary);"></p>`; toolsLogic.startClock(); } },
            { id: 20, name: "Case Converter", desc: "UPPER, lower, Capitalize.", func: (box) => { box.innerHTML = toolsLogic.getCaseHTML(); } },
        ];

        // ============================================
        // 2. LOGIC HANDLERS
        // ============================================

        const modal = document.getElementById('modal');
        const modalBody = document.getElementById('modal-body');
        const modalTitle = document.getElementById('modal-title');
        
        // --- 2.1 Navigation & Overlay Logic ---

        function openModalBase(title) {
            modalTitle.textContent = title;
            modalBody.innerHTML = '';
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
            // Stop background processes
            if(window.recognition) window.recognition.stop();
            if(window.clockInterval) clearInterval(window.clockInterval);
            if(window.stopwatchInt) clearInterval(window.stopwatchInt);
        }

        function openAbout() {
            openModalBase("About SG Multi Tools");
            modalBody.innerHTML = `
                <div style="text-align:center;">
                    <div style="display:inline-flex; align-items:center; justify-content:center; width:60px; height:60px; background:#1c222d; border-radius:50%; border:2px solid var(--accent-primary); margin-bottom:20px; font-weight:bold; font-size:1.5rem; color:var(--accent-primary);">SG</div>
                    <p style="color:var(--text-secondary); font-size:1.1rem; margin-bottom:20px;">
                        SG Multi Tools is your premium all-in-one frontend utility station. 
                        We provide professional-grade tools running directly in your browser without any server-side delay.
                    </p>
                    <p style="color:#888; font-size:0.9rem;">
                        <strong>Domain:</strong> sgtools.in <br>
                        <strong>Version:</strong> 1.0.0 (Premium)
                    </p>
                </div>
            `;
        }

        function openContact() {
            openModalBase("Contact Support");
            modalBody.innerHTML = `
                <p style="margin-bottom:20px; color:#aaa; font-size:0.9rem;">Please fill out the details below. This will open your default email client.</p>
                <div class="input-group">
                    <label>Your Name</label>
                    <input type="text" id="cName" placeholder="Enter your name">
                </div>
                <div class="input-group">
                    <label>Your Email</label>
                    <input type="email" id="cEmail" placeholder="you@example.com">
                </div>
                <div class="input-group">
                    <label>Message / Query</label>
                    <textarea id="cMsg" rows="5" placeholder="How can we help you?"></textarea>
                </div>
                <button class="btn-neon" onclick="submitContact()">Send Message</button>
            `;
        }

        function submitContact() {
            const name = document.getElementById('cName').value;
            const email = document.getElementById('cEmail').value;
            const msg = document.getElementById('cMsg').value;
            
            if(!name || !msg) { alert("Please fill in Name and Message fields."); return; }

            const subject = encodeURIComponent(`Inquiry from SG-Tools: ${name}`);
            const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\nMessage:\n${msg}`);
            
            window.location.href = `mailto:${contactEmail}?subject=${subject}&body=${body}`;
        }

        // --- 2.2 Tool Rendering ---

        function renderTools() {
            const grid = document.getElementById('toolsGrid');
            tools.forEach(tool => {
                const card = document.createElement('div');
                card.className = 'tool-card';
                card.innerHTML = `
                    <h2>${tool.name}</h2>
                    <p>${tool.desc}</p>
                    <button class="btn-neon" onclick="openTool(${tool.id})">Launch Tool</button>
                `;
                grid.appendChild(card);
            });
        }

        function openTool(id) {
            const tool = tools.find(t => t.id === id);
            if(tool) {
                openModalBase(tool.name);
                tool.func(modalBody);
            }
        }

        // --- 2.3 Tool Calculations & Features ---

        const toolsLogic = {
            showRes: (html) => {
                const res = document.getElementById('resultArea');
                res.innerHTML = html;
                res.style.display = 'block';
            },

            // Images
            convertImage: () => {
                const input = document.getElementById('imgInput').files[0];
                const format = document.getElementById('formatSelect').value;
                if(!input) return alert('Please upload an image.');
                
                const reader = new FileReader();
                reader.readAsDataURL(input);
                reader.onload = e => {
                    const img = new Image();
                    img.src = e.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width; canvas.height = img.height;
                        canvas.getContext('2d').drawImage(img, 0, 0);
                        const dataUrl = canvas.toDataURL(format);
                        toolsLogic.showRes(`<p>Success!</p><br><a href="${dataUrl}" download="converted${format.replace('image/','.')}" class="btn-neon">Download Image</a><br><img src="${dataUrl}" style="max-width:150px; margin-top:10px; border:1px solid #444;">`);
                    }
                }
            },
            compressImage: () => {
                const input = document.getElementById('imgCompInput').files[0];
                const quality = parseFloat(document.getElementById('qualityRange').value);
                if(!input) return alert('Select image first');
                const reader = new FileReader();
                reader.readAsDataURL(input);
                reader.onload = e => {
                    const img = new Image();
                    img.src = e.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width; canvas.height = img.height;
                        canvas.getContext('2d').drawImage(img, 0, 0);
                        const dataUrl = canvas.toDataURL('image/jpeg', quality);
                        const oldSize = (input.size/1024).toFixed(1);
                        toolsLogic.showRes(`
                            <p style="margin-bottom:10px;">Original: ${oldSize} KB <br> Quality: ${Math.round(quality*100)}%</p>
                            <a href="${dataUrl}" download="sg-compressed.jpg" class="btn-neon">Download Compressed</a>
                        `);
                    }
                }
            },

            // Strings
            base64Func: () => {
                const act = document.getElementById('b64action').value;
                const txt = document.getElementById('b64Input').value;
                try {
                    const r = act === 'enc' ? btoa(txt) : atob(txt);
                    document.getElementById('resultArea').innerText = r;
                    document.getElementById('resultArea').style.display = 'block';
                } catch(e) { document.getElementById('resultArea').innerHTML = "<span style='color:red'>Invalid input for decoding</span>"; document.getElementById('resultArea').style.display='block'; }
            },

            // Calculators
            calcAge: () => {
                const d = new Date(document.getElementById('dobInput').value);
                const now = new Date();
                if(isNaN(d)) return;
                let age = now.getFullYear() - d.getFullYear();
                if(now < new Date(now.getFullYear(), d.getMonth(), d.getDate())) age--;
                toolsLogic.showRes(`<h3>Age: ${age} Years</h3>`);
            },
            calcBMI: () => {
                const w = parseFloat(document.getElementById('weight').value);
                const h = parseFloat(document.getElementById('height').value) / 100;
                if(!w || !h) return;
                const b = (w/(h*h)).toFixed(1);
                let t = b < 18.5 ? "Underweight" : b < 25 ? "Normal" : "Overweight";
                let c = b < 18.5 ? "yellow" : b < 25 ? "#42f8f5" : "orange";
                toolsLogic.showRes(`<h3 style="color:${c}">BMI: ${b}</h3><p>Status: ${t}</p>`);
            },
            calcEMI: () => {
                const P = document.getElementById('p').value;
                const R = document.getElementById('r').value / 1200;
                const N = document.getElementById('n').value;
                const emi = (P * R * Math.pow(1+R,N)) / (Math.pow(1+R,N)-1);
                toolsLogic.showRes(`<h3>EMI: ${parseFloat(emi).toFixed(2)}</h3>`);
            },
            calcSIP: () => {
                const p = parseFloat(document.getElementById('monthly').value);
                const r = parseFloat(document.getElementById('rate').value) / 100 / 12;
                const t = parseFloat(document.getElementById('years').value) * 12;
                const val = p * ((Math.pow(1+r, t)-1)/r) * (1+r);
                toolsLogic.showRes(`<h3>Maturity Amount: ${parseFloat(val).toFixed(2)}</h3>`);
            },

            // Generators
            genQR: () => {
                const t = document.getElementById('qrText').value;
                if(!t) return;
                // Using standard chart API for frontend generation
                toolsLogic.showRes(`<img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(t)}" style="border:5px solid white; border-radius:5px;">`);
            },
            genPass: () => {
                const len = document.getElementById('pwdLen').value;
                const ch = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
                let ret = "";
                for(let i=0; i<len; ++i) ret += ch.charAt(Math.floor(Math.random()*ch.length));
                toolsLogic.showRes(`<div style="background:#000; padding:10px; color:var(--accent-primary); font-family:monospace; font-size:1.2rem; border-radius:4px; text-align:center;">${ret}</div>`);
            },

            // Utility
            pickColor: () => {
                const v = document.getElementById('colorInput').value;
                const r = parseInt(v.substr(1,2),16);
                const g = parseInt(v.substr(3,2),16);
                const b = parseInt(v.substr(5,2),16);
                document.getElementById('resultArea').innerHTML = `HEX: <b>${v}</b><br>RGB: <b>rgb(${r}, ${g}, ${b})</b>`;
            },
            countWord: () => {
                const t = document.getElementById('wordInput').value.trim();
                const wc = t ? t.split(/\s+/).length : 0;
                document.getElementById('resultArea').innerHTML = `Words: <b>${wc}</b> <span style="margin:0 10px;">|</span> Chars: <b>${t.length}</b>`;
            },
            speakText: () => {
                const t = document.getElementById('ttsInput').value;
                if(!window.speechSynthesis) return alert('Browser not compatible');
                const u = new SpeechSynthesisUtterance(t);
                window.speechSynthesis.speak(u);
            },
            toggleMic: () => {
                const btn = document.getElementById('micBtn');
                const box = document.getElementById('resultArea');
                
                const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;
                if(!SpeechRec) return alert('Browser not supported.');

                if(!window.recognition) {
                    window.recognition = new SpeechRec();
                    window.recognition.continuous = true;
                    window.recognition.interimResults = true;
                    
                    window.recognition.onstart = () => {
                        btn.innerHTML = "STOP RECORDING";
                        btn.style.backgroundColor = "var(--accent-primary)";
                        btn.style.color = "#000";
                    }
                    window.recognition.onend = () => {
                        btn.innerHTML = "START RECORDING";
                        btn.style.background = "transparent";
                        btn.style.color = "var(--accent-primary)";
                        window.recognition = null;
                    }
                    window.recognition.onresult = (e) => {
                        let f = "";
                        for(let i=e.resultIndex; i<e.results.length; ++i) f += e.results[i][0].transcript;
                        box.innerText = f;
                    }
                    window.recognition.start();
                } else {
                    window.recognition.stop();
                }
            },
            formatJSON: () => {
                const t = document.getElementById('jsonInput').value;
                try {
                    document.getElementById('jsonOutput').value = JSON.stringify(JSON.parse(t), null, 4);
                } catch(e) { alert("Invalid JSON"); }
            },
            
            // Watch & Time
            startWatch: () => {
                if(window.stopwatchInt) return;
                const startT = Date.now() - (window.swElapsed || 0);
                window.stopwatchInt = setInterval(() => {
                    window.swElapsed = Date.now() - startT;
                    let ms = Math.floor((window.swElapsed % 1000) / 10);
                    let s = Math.floor((window.swElapsed / 1000) % 60);
                    let m = Math.floor((window.swElapsed / 60000) % 60);
                    document.getElementById('swDisplay').innerText = 
                        `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}:${ms.toString().padStart(2,'0')}`;
                }, 50);
            },
            stopWatch: () => { clearInterval(window.stopwatchInt); window.stopwatchInt = null; },
            resetWatch: () => { 
                toolsLogic.stopWatch(); 
                window.swElapsed = 0; 
                document.getElementById('swDisplay').innerText = "00:00:00"; 
            },
            startClock: () => {
                const update = () => {
                    if(document.getElementById('liveClock')) {
                        const d = new Date();
                        document.getElementById('liveClock').innerText = d.toLocaleTimeString();
                        document.getElementById('liveDate').innerText = d.toDateString();
                    }
                };
                update();
                window.clockInterval = setInterval(update, 1000);
            },

            loadAudioPreview: (el) => {
                const f = el.files[0];
                if(f) document.getElementById('audioPreview').src = URL.createObjectURL(f);
            },

            // HTML Getters for simple layouts
            getUnitHTML: () => `
                <div class="input-group"><label>Value</label><input type="number" id="unitVal" oninput="toolsLogic.convertUnit()"></div>
                <div class="input-group"><label>Conversion Type</label>
                <select id="unitType" onchange="toolsLogic.convertUnit()">
                    <option value="km2mi">Kilometers -> Miles</option>
                    <option value="mi2km">Miles -> Kilometers</option>
                    <option value="kg2lb">Kilograms -> Pounds</option>
                    <option value="lb2kg">Pounds -> Kilograms</option>
                    <option value="c2f">Celsius -> Fahrenheit</option>
                </select></div>
                <div id="unitRes" style="margin-top:20px; font-size:1.5rem; text-align:center; color:var(--accent-primary);">0</div>
            `,
            convertUnit: () => {
                const v = parseFloat(document.getElementById('unitVal').value);
                const t = document.getElementById('unitType').value;
                const d = document.getElementById('unitRes');
                if(isNaN(v)) { d.innerText = "0"; return; }
                let r=0, u="";
                if(t=='km2mi') { r=v*0.621371; u="miles"; }
                if(t=='mi2km') { r=v/0.621371; u="km"; }
                if(t=='kg2lb') { r=v*2.20462; u="lbs"; }
                if(t=='lb2kg') { r=v/2.20462; u="kg"; }
                if(t=='c2f')   { r=(v*9/5)+32; u="°F"; }
                d.innerText = r.toFixed(2) + " " + u;
            },

            getTipHTML: () => `
                <div class="input-group"><label>Bill Amount</label><input type="number" id="bill"></div>
                <div class="input-group"><label>Tip Percentage (%)</label><input type="number" id="tip" placeholder="15"></div>
                <div class="input-group"><label>Split Between (People)</label><input type="number" id="ppl" placeholder="1"></div>
                <button class="btn-neon" onclick="toolsLogic.calcTip()">Calculate</button>
                <div class="result-box" id="resultArea"></div>
            `,
            calcTip: () => {
                const b = parseFloat(document.getElementById('bill').value);
                const t = parseFloat(document.getElementById('tip').value) || 0;
                const p = parseFloat(document.getElementById('ppl').value) || 1;
                const tot = b + (b * t/100);
                toolsLogic.showRes(`Total Pay: <b>${tot.toFixed(2)}</b><br>Per Person: <b>${(tot/p).toFixed(2)}</b>`);
            },
            getCaseHTML: () => `
                <div class="input-group"><textarea id="caseTxt" rows="5" placeholder="Enter text..."></textarea></div>
                <div style="display:flex; gap:10px;">
                    <button class="btn-neon" onclick="document.getElementById('caseTxt').value = document.getElementById('caseTxt').value.toUpperCase()">UPPER</button>
                    <button class="btn-neon" onclick="document.getElementById('caseTxt').value = document.getElementById('caseTxt').value.toLowerCase()">lower</button>
                </div>
            `
        };

        // Initialize Layout
        renderTools();
        
        // Window close
        window.onclick = e => { if(e.target == modal) closeModal(); }

        </script>

    <!-- ===========================
         FOOTER
         =========================== -->
    <footer class="site-footer">
        <p>© 2026 SG Multi Tools. All rights reserved.</p>
        <p>
            <a href="/privacy-policy.html">Privacy Policy</a>
        </p>
    </footer>

</body>
</html>

</body>
</html>
