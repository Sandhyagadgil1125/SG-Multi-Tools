<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timer & Stopwatch | SG Multi Tools</title>

<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --accent:#42f8f5;
  --text:#ffffff;
  --muted:#94a3b8;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Arial, sans-serif;
  padding:10px;
}

.tool{
  max-width:420px;
  margin:30px auto;
  background:var(--card);
  padding:24px;
  border-radius:18px;
  border:2px solid var(--accent);
  box-shadow:0 0 30px rgba(66,248,245,.45);
  text-align:center;
}

h2{ margin-bottom:16px; }

/* CLOCK */
.clock{
  position:relative;
  width:220px;
  height:220px;
  border-radius:50%;
  border:6px solid var(--accent);
  margin:18px auto;
}

.hand{
  position:absolute;
  width:3px;
  height:90px;
  background:var(--accent);
  top:20px;
  left:50%;
  transform-origin:bottom;
}

.center-dot{
  position:absolute;
  width:10px;
  height:10px;
  background:var(--accent);
  border-radius:50%;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
}

.time{
  font-size:26px;
  font-weight:bold;
  margin-top:8px;
}

/* INPUT */
input{
  width:100%;
  height:42px;
  border-radius:10px;
  border:none;
  padding:0 10px;
  font-size:16px;
  margin-top:12px;
}

/* CONTROLS */
.controls{
  display:flex;
  gap:10px;
  margin-top:18px;
}

button{
  flex:1;
  height:44px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  background:var(--accent);
  color:#000;
  cursor:pointer;
}
button:active{ transform:scale(.98); }
</style>
</head>

<body>

<div class="tool">
  <h2>Timer / Stopwatch</h2>

  <div class="clock">
    <div class="hand" id="secondHand"></div>
    <div class="center-dot"></div>
  </div>

  <div class="time" id="display">00:00.00</div>

  <!-- TIMER INPUT (seconds) -->
  <input type="number" id="timerInput" placeholder="Timer seconds (optional)" min="1">

  <div class="controls">
    <button onclick="start()">Start</button>
    <button onclick="stop()">Stop</button>
    <button onclick="reset()">Reset</button>
  </div>
</div>

<!-- ðŸ”” Bell sound -->
<audio id="bell">
  <source src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg" type="audio/ogg">
  <source src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.mp3" type="audio/mpeg">
</audio>

<script>
let startTime = 0;
let running = false;
let rafId;
let timerDuration = null;

const display = document.getElementById("display");
const hand = document.getElementById("secondHand");
const bell = document.getElementById("bell");
const timerInput = document.getElementById("timerInput");

function playBell(){
  bell.currentTime = 0;
  bell.play().catch(()=>{});
}

function update(){
  if(!running) return;

  const now = performance.now();
  const elapsed = now - startTime;

  let remaining = timerDuration ? timerDuration - elapsed : elapsed;

  if(timerDuration && remaining <= 0){
    display.textContent = "00:00.00";
    hand.style.transform = "rotate(0deg)";
    running = false;
    playBell(); // ðŸ”” TIMER COMPLETE
    return;
  }

  const totalSeconds = Math.abs(remaining) / 1000;
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;

  display.textContent =
    `${String(minutes).padStart(2,"0")}:${seconds.toFixed(2).padStart(5,"0")}`;

  /* ðŸ”„ Smooth moving seconds */
  const angle = (seconds / 60) * 360;
  hand.style.transform = `rotate(${angle}deg)`;

  rafId = requestAnimationFrame(update);
}

function start(){
  if(running) return;

  const inputSeconds = parseFloat(timerInput.value);
  timerDuration = !isNaN(inputSeconds) && inputSeconds > 0
    ? inputSeconds * 1000
    : null;

  startTime = performance.now();
  running = true;
  update();
}

function stop(){
  if(!running) return;
  running = false;
  cancelAnimationFrame(rafId);
  playBell(); // ðŸ”” STOPWATCH STOP
}

function reset(){
  running = false;
  cancelAnimationFrame(rafId);
  display.textContent = "00:00.00";
  hand.style.transform = "rotate(0deg)";
  timerInput.value = "";
}
</script>

</body>
</html>
