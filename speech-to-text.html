<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Speech to Text | SG Multi Tools</title>

</head>

<body>

<div class="tool-wrapper">
  <h2>Speech to Text</h2>

  <!-- RESULT / LIVE TEXT -->
  <div class="flexbox result" id="output">
    Your speech will appear here...
  </div>

  <!-- BUTTONS -->
  <div class="flexbox">
    <button onclick="startListening()">Start Listening</button>
  </div>

  <div class="flexbox">
    <button onclick="stopListening()">Stop</button>
  </div>
</div>

<script>
let recognition;
let isListening = false;

if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SpeechRecognition();
  recognition.continuous = true;
  recognition.interimResults = true;
  recognition.lang = 'en-US';

  recognition.onresult = (event) => {
    let transcript = "";
    for (let i = event.resultIndex; i < event.results.length; i++) {
      transcript += event.results[i][0].transcript;
    }
    document.getElementById("output").textContent = transcript;
  };

  recognition.onerror = () => {
    document.getElementById("output").textContent = "Error occurred. Please try again.";
  };
}

function startListening(){
  if(recognition && !isListening){
    recognition.start();
    isListening = true;
    document.getElementById("output").textContent = "Listening...";
  }
}

function stopListening(){
  if(recognition && isListening){
    recognition.stop();
    isListening = false;
  }
}
</script>

</body>
</html>
