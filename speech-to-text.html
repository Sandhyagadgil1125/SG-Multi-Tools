<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech to Text ¬∑ SG Multi Tools</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== ULTRA-COMPACT STANDALONE ===== */
        body {
            background: var(--main-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
        }

        .tool-standalone {
            background: var(--button-bg-alt);
            border-radius: 20px;
            border: 1px solid var(--dark-border);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            padding: 1.2rem;
            width: 100%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            margin: auto;
        }

        .tool-standalone h1 {
            font-size: 1.3rem !important;
            margin-bottom: 0.3rem !important;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Speech to Text specific styles */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 100px;
            padding: 0.3rem 0.8rem;
            margin-bottom: 1rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .status-led {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--text-muted);
            transition: var(--transition);
        }

        .status-led.active {
            background: var(--danger-color);
            box-shadow: 0 0 8px var(--danger-color);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .input-group {
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .input-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .input-label i {
            color: var(--primary-accent);
            width: 18px;
            text-align: center;
        }

        .language-select {
            width: 100%;
            background: var(--button-bg-alt);
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            padding: 0.7rem 1rem;
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            outline: none;
            transition: var(--transition);
            cursor: pointer;
        }

        .language-select:focus {
            border-color: var(--primary-accent);
            box-shadow: 0 0 0 3px var(--glow-shadow);
        }

        .transcript-container {
            background: var(--main-bg);
            border: 1px solid var(--dark-border);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
            min-height: 150px;
            max-height: 250px;
            overflow-y: auto;
        }

        .transcript-content {
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .interim-content {
            color: var(--text-muted);
            font-style: italic;
            margin-top: 0.3rem;
            padding-top: 0.3rem;
            border-top: 1px dashed var(--dark-border);
        }

        .action-buttons {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        .primary-btn {
            flex: 1;
            background: var(--primary-accent);
            color: var(--main-bg);
            border: none;
            border-radius: 16px;
            padding: 0.7rem;
            font-size: 0.95rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .primary-btn:hover {
            background: var(--accent-shade);
            box-shadow: 0 0 20px var(--glow-shadow);
            transform: translateY(-2px);
        }

        .secondary-btn {
            flex: 1;
            background: var(--button-bg);
            border: 1px solid var(--dark-border);
            border-radius: 16px;
            padding: 0.7rem;
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .secondary-btn:hover {
            background: var(--primary-accent);
            color: var(--main-bg);
            border-color: var(--primary-accent);
            box-shadow: 0 0 12px var(--glow-shadow);
        }

        .copy-btn {
            background: var(--button-bg);
            border: 1px solid var(--dark-border);
            border-radius: 14px;
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            transition: var(--transition);
            cursor: pointer;
            margin-left: auto;
        }

        .copy-btn:hover {
            background: var(--primary-accent);
            color: var(--main-bg);
            border-color: var(--primary-accent);
            box-shadow: 0 0 12px var(--glow-shadow);
        }

        .copy-btn.copied {
            background: var(--success-color);
            border-color: var(--success-color);
            color: var(--main-bg);
        }

        .error-message {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid var(--danger-color);
            border-radius: 12px;
            padding: 0.7rem;
            color: var(--danger-color);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .compat-warning {
            background: rgba(66, 248, 245, 0.1);
            border: 1px solid var(--primary-accent);
            border-radius: 12px;
            padding: 0.7rem;
            color: var(--text-secondary);
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .compat-warning i {
            color: var(--primary-accent);
        }

        /* Affiliate link style */
        .affiliate-link {
            margin-top: 1rem;
            text-align: center;
            padding-top: 0.8rem;
            border-top: 1px solid var(--dark-border);
        }
        .affiliate-link a {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--button-bg);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 100px;
            border: 1px solid var(--dark-border);
            font-size: 0.75rem;
            text-decoration: none;
            transition: var(--transition);
        }
        .affiliate-link a:hover {
            background: var(--primary-accent);
            color: var(--main-bg);
            border-color: var(--primary-accent);
            box-shadow: 0 0 12px var(--glow-shadow);
        }
        .affiliate-link i {
            color: var(--primary-accent);
        }
        .affiliate-link a:hover i {
            color: var(--main-bg);
        }

        @media (max-width: 480px) {
            .tool-standalone {
                max-width: 100%;
                padding: 1rem;
            }
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="tool-standalone">
        <!-- Header with icon -->
        <div style="display: flex; align-items: center; gap: 0.6rem; margin-bottom: 0.8rem;">
            <div style="background: var(--primary-accent); width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--main-bg); font-size: 1.1rem;">
                <i class="fas fa-microphone"></i>
            </div>
            <h1 style="font-size: 1.3rem; font-weight: 600; color: var(--text-primary); margin: 0;">Speech to Text</h1>
        </div>

        <!-- Browser Compatibility Warning (shown only if unsupported) -->
        <div id="compatWarning" class="compat-warning" style="display: none;">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Your browser doesn't support speech recognition. Please use Chrome, Edge, or Chromium-based browsers.</span>
        </div>

        <!-- Status Indicator -->
        <div class="status-indicator">
            <div id="statusLed" class="status-led"></div>
            <span id="statusText">Ready</span>
            <span style="margin-left: auto; font-size: 0.7rem;" id="languageDisplay">English</span>
        </div>

        <!-- Language Selection -->
        <div class="input-group">
            <div class="input-label">
                <i class="fas fa-language"></i>
                <span>Recognition Language</span>
            </div>
            <select id="languageSelect" class="language-select">
                <option value="en-US" selected>English (United States)</option>
                <option value="en-GB">English (United Kingdom)</option>
                <option value="en-AU">English (Australia)</option>
                <option value="en-CA">English (Canada)</option>
                <option value="en-IN">English (India)</option>
                <option value="hi-IN">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                <option value="es-ES">Espa√±ol (Spanish)</option>
                <option value="fr-FR">Fran√ßais (French)</option>
                <option value="de-DE">Deutsch (German)</option>
                <option value="it-IT">Italiano (Italian)</option>
                <option value="pt-BR">Portugu√™s (Brazilian Portuguese)</option>
                <option value="ru-RU">–†—É—Å—Å–∫–∏–π (Russian)</option>
                <option value="ja-JP">Êó•Êú¨Ë™û (Japanese)</option>
                <option value="ko-KR">ÌïúÍµ≠Ïñ¥ (Korean)</option>
                <option value="zh-CN">‰∏≠Êñá (Chinese Simplified)</option>
                <option value="zh-TW">‰∏≠Êñá (Chinese Traditional)</option>
                <option value="ar-SA">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                <option value="nl-NL">Nederlands (Dutch)</option>
                <option value="sv-SE">Svenska (Swedish)</option>
                <option value="da-DK">Dansk (Danish)</option>
                <option value="fi-FI">Suomi (Finnish)</option>
                <option value="no-NO">Norsk (Norwegian)</option>
                <option value="pl-PL">Polski (Polish)</option>
                <option value="tr-TR">T√ºrk√ße (Turkish)</option>
            </select>
        </div>

        <!-- Transcription Display -->
        <div class="transcript-container">
            <div id="finalTranscript" class="transcript-content"></div>
            <div id="interimTranscript" class="interim-content"></div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="startBtn" class="primary-btn">
                <i class="fas fa-microphone"></i> Start Listening
            </button>
            <button id="stopBtn" class="secondary-btn" disabled>
                <i class="fas fa-stop"></i> Stop
            </button>
        </div>

        <!-- Clear & Copy Row -->
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <button id="clearBtn" class="secondary-btn" style="flex: 1;">
                <i class="fas fa-trash-alt"></i> Clear
            </button>
            <button id="copyBtn" class="copy-btn">
                <i class="fas fa-copy"></i> Copy
            </button>
        </div>

        <!-- Error Display -->
        <div id="errorContainer" style="display: none;"></div>

        <!-- Affiliate Link -->
        <div class="affiliate-link">
            <a href="https://www.digistore24.com/redir/475469/Top100PercentSandhya/" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-star"></i>
                <span>Get the <strong>Ultimate Trading Course</strong> ‚Äì 90% OFF</span>
                <i class="fas fa-external-link-alt"></i>
            </a>
        </div>
    </div>

    <!-- Additional content for AdSense -->
    <div style="margin-top: 2rem; padding: 1.5rem; background: var(--main-bg); border: 1px solid var(--dark-border); border-radius: 16px; color: var(--text-secondary);">
        <h3 style="color: var(--primary-accent); font-size: 1.2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
            <i class="fas fa-microphone"></i> About the Speech to Text Tool
        </h3>
        <p style="margin-bottom: 1rem; line-height: 1.6;">
            Our Speech to Text tool converts your spoken words into written text in real time, directly in your browser. No installations, no uploads ‚Äì just you, your microphone, and instant transcription. It's perfect for taking notes, dictating messages, or improving accessibility. With support for over 20 languages, you can speak naturally and see the text appear as you talk.
        </p>

        <h4 style="color: var(--text-primary); font-size: 1rem; margin: 1.5rem 0 0.5rem;">‚ú® Key Features</h4>
        <ul style="list-style: none; padding: 0; margin-bottom: 1.5rem;">
            <li style="margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.5rem;">
                <i class="fas fa-check-circle" style="color: var(--primary-accent); margin-top: 0.2rem;"></i>
                <span><strong>Real‚Äëtime transcription:</strong> See your speech converted to text as you speak, with interim results shown in real time.</span>
            </li>
            <li style="margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.5rem;">
                <i class="fas fa-check-circle" style="color: var(--primary-accent); margin-top: 0.2rem;"></i>
                <span><strong>20+ languages:</strong> Choose from English, Hindi, Spanish, French, German, Chinese, Japanese, Arabic, and many more.</span>
            </li>
            <li style="margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.5rem;">
                <i class="fas fa-check-circle" style="color: var(--primary-accent); margin-top: 0.2rem;"></i>
                <span><strong>Privacy‚Äëfirst:</strong> All processing happens locally in your browser ‚Äì your voice never leaves your device.</span>
            </li>
            <li style="margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.5rem;">
                <i class="fas fa-check-circle" style="color: var(--primary-accent); margin-top: 0.2rem;"></i>
                <span><strong>Copy & clear:</strong> Easily copy the transcribed text or start fresh with one click.</span>
            </li>
        </ul>

        <h4 style="color: var(--text-primary); font-size: 1rem; margin: 1.5rem 0 0.5rem;">üìù How to Use</h4>
        <ol style="margin-bottom: 1.5rem; padding-left: 1.2rem; line-height: 1.6;">
            <li>Select your preferred language from the dropdown.</li>
            <li>Click <strong>"Start Listening"</strong> and allow microphone access when prompted.</li>
            <li>Speak clearly ‚Äì your words will appear in the transcript area.</li>
            <li>Click <strong>"Stop"</strong> when you're done.</li>
            <li>Use <strong>"Copy"</strong> to copy the transcribed text, or <strong>"Clear"</strong> to reset.</li>
        </ol>

        <h4 style="color: var(--text-primary); font-size: 1rem; margin: 1.5rem 0 0.5rem;">üí° When to Use</h4>
        <ul style="margin-bottom: 1.5rem; padding-left: 1.2rem; line-height: 1.6;">
            <li><strong>Note‚Äëtaking:</strong> Dictate ideas, meeting minutes, or lectures hands‚Äëfree.</li>
            <li><strong>Accessibility:</strong> For users who find typing difficult or prefer speaking.</li>
            <li><strong>Language practice:</strong> See how well your pronunciation matches the expected text.</li>
            <li><strong>Quick messaging:</strong> Compose emails or messages by voice.</li>
        </ul>

        <div style="background: rgba(66,248,245,0.1); border-left: 4px solid var(--primary-accent); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
            <p style="font-style: italic; margin: 0; color: var(--text-primary);">
                ‚ÄúSpeak naturally, see it instantly ‚Äì your voice, transcribed in real time.‚Äù
            </p>
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            const startBtn = document.getElementById('startBtn');
            const stopBtn = document.getElementById('stopBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const finalTranscriptDiv = document.getElementById('finalTranscript');
            const interimTranscriptDiv = document.getElementById('interimTranscript');
            const statusLed = document.getElementById('statusLed');
            const statusText = document.getElementById('statusText');
            const languageSelect = document.getElementById('languageSelect');
            const languageDisplay = document.getElementById('languageDisplay');
            const compatWarning = document.getElementById('compatWarning');
            const errorContainer = document.getElementById('errorContainer');

            let recognition = null;
            let isSupported = true;
            let finalTranscript = '';
            let isListening = false;

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                isSupported = false;
                compatWarning.style.display = 'flex';
                startBtn.disabled = true;
                startBtn.style.opacity = '0.5';
                startBtn.style.cursor = 'not-allowed';
                statusText.textContent = 'Not supported';
            }

            function initRecognition() {
                if (!isSupported) return;
                
                recognition = new SpeechRecognition();
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.maxAlternatives = 1;
                recognition.lang = languageSelect.value;
                
                const selectedOption = languageSelect.options[languageSelect.selectedIndex];
                languageDisplay.textContent = selectedOption.textContent.split('(')[0].trim() || 'English';
                
                let isListeningForcedStop = false;
                
                recognition.onstart = function() {
                    isListening = true;
                    statusLed.classList.add('active');
                    statusText.textContent = 'Listening...';
                    startBtn.disabled = true;
                    stopBtn.disabled = false;
                    errorContainer.style.display = 'none';
                };
                
                recognition.onend = function() {
                    isListening = false;
                    statusLed.classList.remove('active');
                    statusText.textContent = 'Ready';
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                    
                    if (isListeningForcedStop) {
                        isListeningForcedStop = false;
                        return;
                    }
                };
                
                recognition.onresult = function(event) {
                    let interim = '';
                    
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        
                        if (event.results[i].isFinal) {
                            finalTranscript += transcript + ' ';
                            finalTranscriptDiv.textContent = finalTranscript;
                        } else {
                            interim += transcript;
                        }
                    }
                    
                    interimTranscriptDiv.textContent = interim || 'üé§ Speak now...';
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    
                    let errorMessage = '';
                    switch(event.error) {
                        case 'not-allowed':
                            errorMessage = '‚ùå Microphone access denied. Please allow microphone permissions and try again.';
                            break;
                        case 'no-speech':
                            errorMessage = '‚è∏Ô∏è No speech detected. Please check your microphone and try again.';
                            break;
                        case 'network':
                            errorMessage = 'üåê Network error occurred. Please check your internet connection.';
                            break;
                        default:
                            errorMessage = `‚ö†Ô∏è Recognition error: ${event.error}`;
                    }
                    
                    errorContainer.style.display = 'block';
                    errorContainer.className = 'error-message';
                    errorContainer.innerHTML = `<i class="fas fa-info-circle"></i> ${errorMessage}`;
                    
                    statusLed.classList.remove('active');
                    statusText.textContent = 'Ready';
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                    isListening = false;
                };
            }

            function startListening() {
                if (!isSupported) {
                    alert('Speech recognition is not supported in your browser. Please use Chrome, Edge, or another Chromium-based browser.');
                    return;
                }
                
                try {
                    initRecognition();
                    recognition.start();
                } catch (error) {
                    console.error('Failed to start recognition:', error);
                    if (error.message.includes('already started')) {
                        recognition.stop();
                        setTimeout(() => {
                            initRecognition();
                            recognition.start();
                        }, 250);
                    } else {
                        errorContainer.style.display = 'block';
                        errorContainer.className = 'error-message';
                        errorContainer.innerHTML = `<i class="fas fa-exclamation-circle"></i> Failed to start: ${error.message}`;
                    }
                }
            }

            function stopListening() {
                if (recognition && isListening) {
                    isListeningForcedStop = true;
                    recognition.stop();
                }
            }

            function clearTranscription() {
                finalTranscript = '';
                finalTranscriptDiv.textContent = '';
                interimTranscriptDiv.textContent = '';
                errorContainer.style.display = 'none';
            }

            function copyTranscription() {
                const textToCopy = finalTranscriptDiv.textContent || interimTranscriptDiv.textContent;
                if (!textToCopy || textToCopy === '') {
                    alert('Nothing to copy.');
                    return;
                }
                
                navigator.clipboard.writeText(textToCopy).then(() => {
                    copyBtn.classList.add('copied');
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.classList.remove('copied');
                        copyBtn.innerHTML = originalHTML;
                    }, 2000);
                }).catch(() => {
                    alert('Failed to copy. Please copy manually.');
                });
            }

            languageSelect.addEventListener('change', function() {
                if (isListening) {
                    stopListening();
                }
                const selectedOption = languageSelect.options[languageSelect.selectedIndex];
                languageDisplay.textContent = selectedOption.textContent.split('(')[0].trim() || 'English';
            });

            startBtn.addEventListener('click', startListening);
            stopBtn.addEventListener('click', stopListening);
            clearBtn.addEventListener('click', clearTranscription);
            copyBtn.addEventListener('click', copyTranscription);

            window.addEventListener('beforeunload', function() {
                if (recognition && isListening) {
                    recognition.stop();
                }
            });

            if (isSupported) {
                initRecognition();
                languageDisplay.textContent = 'English';
            }
        })();
    </script>
</body>
</html>
